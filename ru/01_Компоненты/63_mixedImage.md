Добавляет новый тип TV поля: Смешанная загрузка файла

* Выбор файла из файлового менеджера
* Выбор файла с компьютера, минуя файловый менеджер
* Превью изображений и видео(html5 video player)
* Физическое удаление файла при очистке поля
* Ресайз через phpthumb при загрузке изображения
* Загрузка по url
* Drag-and-drop 

[![](https://file.modx.pro/files/1/b/1/1b19540fc2888f0c02879617e55c1039s.jpg)](https://file.modx.pro/files/1/b/1/1b19540fc2888f0c02879617e55c1039.png)

## Системные настройки

| Имя              | По умолчанию | Описание                                                                                                                       |
| ---------------- | ------------ | ----------------------------------------------------------------------------------------------------------------------------------- |
| **Загружать только при редактировании**     | Да | Разрешает загружать фото только при редактировнаии ресурса                                                                                        |
| **Транслитерация файлов** |     Нет         | Позволяет на некоторых хостингах избежать проблем с кириллическими наименованиями файлов                                                |
| **Длина строки для плейсхолдера {rand}**     |      6        | Настройка используется если при создании TV поля в качестве префикса было использовано значение {rand}                                                  |



## Настройки TV поля

| Настройка           | По умолчанию | Описание                                                                                                                       |
| ---------------- | ------------ | ----------------------------------------------------------------------------------------------------------------------------------- |
| **Путь сохранения**     | - | Можно указать подпапку. Путь идет от корня медиа источника                                                           |
| **Префикс имени файла** |     -         | Добавляет значение перед названием файла при сохранении. Возможны следующие варинты: {id}, {pid}, {alias}, {context}, {tid}, {uid}, {rand}, {t}, {y}, {m}, {d}, {h}, {i}, {s}. Можно использовать сразу несколько                                               |
| **Принимаемые типы MIME**     |     -        | Возможность ограничивать тип загружаемого файла по MIME Type. Например, image/jpeg, image/png, application/pdf                                                  |
| **Использовать префикс как имя файла**     |     Нет        | Заменяет имя загружаемого файла на указанный префикс                                                  |
| **Показать превью**     |     Да        | Показывает мини изображение для изображений и видео плеер для mp4 файлов                                                 |
| **Удалять файл**     |     Нет       | Физически удаляет файл с сервера при нажатии на кнопку Очистить поле                                                 |
| **Параметры для ресайза изображений**     |     -       | Phpthumb параметры для применения к изображению при загрузке.  Например:  w=200&h=200&zc=1. Для наложения ватермарка : fltr=wmt\|Hello\|60\|C\|ff0000\| Или fltr=wmi\|/assets/wt.png\|C\|                           |
| **Список кнопок**     |     clear,manager,pc       | Возможные значения: clear,manager,pc,url                                   |

## Список кнопок
| Название           |  Описание |
| ---------------- | ------------ |
| **clear**     | Очистка поля. Если параметр **Удалять файл** уставновлен в Да, то файл будет физически удален с сервера |
| **manager**     | Выбор файла из медиа менеджера |
| **pc**     | Выбор файла с компьютера пользоваля, минуя файловый менеджер MODX |
| **url**     | Загрузка файла напрямую по url |

## Возможные плейсхолдеры
| Название           |  Описание |
| ---------------- | ------------ |
| {id} | ID ресурса |
| {pid} | ID ресурса родителя |
| {alias} | Алиас ресурса |
| {palias} | Алиас ресурса родителя |
| {context}| Ключ контекста (context_key) |
| {tid} | ID доп. поля (tv) |
| {uid} | ID юзера |
| {rand} | Случайная строка (количество символов указывается в системных настройках) |
| {t} | Время в формате timestamp |
| {y} | Год |
| {m} | Месяц |
| {d} | День |
| {h} | Час |
| {i} | Минута |
| {s} | Секунда |
