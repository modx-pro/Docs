Сниппет генерации меню. Может заменять Wayfinder, и позволяет более гибко указывать параметры.

Например, умеет строить меню сразу из нескольких родителей, отображая их как вместе, так и отдельными ветками.

Существенный прирост скорости дает только при первом запуске, дальше Wayfinder не особо уступает, благодаря грамотному кэшированию.

## Параметры

Название				| По умолчанию		| Описание
------------------------|-------------------|------------------------------------------------------------------------------------------
**&parents**			| Текущий ресурс	| Список родителей, через запятую, для поиска результатов. Если поставить 0 - выборка не ограничивается. Если id родителя начинается с дефиса, он и его потомки исключаются из выборки.
**&level**				| 0 (не ограниченно)| Уровень генерируемого меню.
**&resources**			|  					| Список ресурсов, через запятую, для вывода в результатах. Если id ресурса начинается с дефиса, этот ресурс исключается из выборки.
**&templates**			|  					| Список шаблонов, через запятую, для фильтрации результатов. Если id шаблона начинается с дефиса, ресурсы с ним исключается из выборки.
**&where**				|  					| Массив дополнительных параметров выборки, закодированный в JSON.
**&displayStart**		| 0					| Включить показ начальных узлов меню. Полезно при указании более одного «parents».
**&context**			|  					| Ограничение выборки по контексту ресурсов.
**&showHidden**			| 0					| Показывать ресурсы, скрытые в меню.
**&showUnpublished**	| 0					| Показывать неопубликованные ресурсы.
**&previewUnpublished**	| 0					| Включить показ неопубликованных документов, если у пользователя есть на это разрешение.
**&hideSubMenus**		| 0					| Спрятать неактивные ветки меню.
**&select**				|  					| Список полей для выборки, через запятую. Можно указывать JSON строку с массивом, например {"modResource":"id,pagetitle,content"}.
**&sortby**				| menuindex			| Любое поле ресурса для сортировки, включая ТВ параметр, если он указан в параметре **&includeTVs**. Можно указывать JSON строку с массивом нескольких полей. Для случайно сортировки укажите «RAND()»
**&sortdir**			| ASC				| Направление сортировки: по убыванию или возрастанию.
**&limit**				| 0					| Ограничение количества результатов выборки. Можно использовать «0».
**&offset**				| 0					| Пропуск результатов от начала. Необходимо использовать вместе с явно указанным **&limit**
**&checkPermissions**	|					| Укажите, какие разрешения нужно проверять у пользователя при выводе документов. Например **&checkPermissions=`list`**.
**&countChildren**		| 0					| Точный подсчет количества дочерних ресурсов каждой категории и вывод их в плейсхолдер `[[+children]]`. Делает дополнительные запросы в БД, поэтому по умолчанию отключен.
**&toPlaceholder**		|  					| Если не пусто, сниппет сохранит все данные в плейсхолдер с этим именем вместо вывода на экран.
**&plPrefix**			| wf.				| Префикс для выставляемых плейсхолдеров
**&showLog**			| 0					| Показывать дополнительную информацию о работе сниппета. Только для авторизованных в контекcте «mgr».
**&fastMode**			| 0					| Быстрый режим обработки чанков. Все необработанные теги (условия, сниппеты и т.п.) будут вырезаны.
**&cache**				| 0					| Кэширование результатов работы сниппета.
**&cacheTime**			| 3600				| Время актуальности кэша, в секундах.
**&scheme**				| -1				| Схема формирования url, передаётся в modX::makeUrl(), поэтому возможные варианты нужно [смотреть здесь][0]. Особый тип `uri` подставляет значение uri ресурса, без запуска функции.
**&useWeblinkUrl**		| 1 				| Генерировать ссылку с учетом класса ресурса.
**&rowIdPrefix**		|  					| Префикс id="" для выставления идентификатора в чанк.
**&hereId**				|  					| Id документа, текущего для генерируемого меню. Нужно указывать только если скрипт сам его неверно определяет, например при выводе меню из чанка другого сниппета.
**&includeTVs**			|					| Список ТВ параметров для выборки, через запятую. Например: «action,time» дадут плейсхолдеры `[[+action]]` и `[[+time]]`.
**&tvPrefix**			|					| Префикс для ТВ параметров.

### Параметры шаблонов
Эти параметры устанавливают чанки, которые содержат шаблоны для генерации меню.

Название				| Описание
------------------------|------------------------------------------------------------------------------------------
**&tplOuter**			| Чанк обертка всего блока меню. По умолчанию: `@INLINE <ul[[+classes]]>[[+wrapper]]</ul>`
**&tpl**				| Имя чанка для оформления ресурса. Если не указан, то содержимое полей ресурса будет распечатано на экран. По умолчанию: `@INLINE <li[[+classes]]><a href="[[+link]]" [[+attributes]]>[[+menutitle]]</a>[[+wrapper]]</li>`
**&tplParentRow**		| Чанк оформления контейнера с потомками
**&tplParentRowHere**	| Чанк оформления текущей категории
**&tplHere**			| Чанк текущего документа
**&tplInner**			| Чанк обертки внутренних пунктов меню. Если пуст - будет использовать **&tplOuter**
**&tplInnerRow**		| Чанк обертка внутреннего пункта меню
**&tplInnerHere**		| Чанк обертка активного пункта меню
**&tplParentRowActive**	| Чанк оформления активной категории
**&tplCategoryFolder**	| Специальный чанк оформления категории. Категория - это документ с «isfolder = 1» и или нулевым шаблоном, или с атрибутом "rel=category"
**&tplStart**			| Чанк оформления корневого пункта, при условии, что включен **&displayStart**. По умолчанию: `@INLINE <h2[[+classes]]>[[+menutitle]]</h2>[[+wrapper]]`

### Параметры CSS классов
Эти параметры задают значение плейсхолдера `[[+classes]]` для различных элементов меню.

Название			| Описание
--------------------|-------------------------------------------------------
**&firstClass**		| Класс для первого пункта меню. По умолчанию: **first**
**&lastClass**		| Класс последнего пункта меню. По умолчанию: **last**
**&hereClass**		| Класс для активного пункта меню. По умолчанию: **active**
**&parentClass**	| Класс категории меню.
**&rowClass**		| Класс одной строки меню.
**&outerClass**		| Класс обертки меню.
**&innerClass**		| Класс внутренних ссылок меню.
**&levelClass**		| Класс уровня меню. Например, если укажите «level», то будет «level1», «level2» и т.д.
**&selfClass**		| Класс текущего документа в меню.
**&webLinkClass**	| Класс документа-ссылки.


## Примеры
Обычный вывод меню из корня сайта в один уровень:
```
[[pdoMenu?
	&parents=`0`
	&level=`1`
]]
```

Вывод с исключением определенных родителей и проверкой разрешений пользователя:
```
[[pdoMenu?
	&parents=`-10,-15`
	&level=`2`
	&checkPermissions=`load,list,view`
]]
```

Вывод меню сразу из двух родителей, с показом корневых точек:
```
[[pdoMenu?
	&parents=`10,15`
	&displayStart=`1`
]]
```

Вывод двух уровней документов с подсчетом количества вложенных ресурсов:
```
[[pdoMenu?
	&parents=`0`
	&level=`2`
	&tplInner=`@INLINE [[+wrapper]]`
	&tplParentRow=`@INLINE <li[[+classes]]><a href="[[+link]]" [[+attributes]]>[[+menutitle]]</a> ([[+children]])</li>[[+wrapper]]`
	&countChildren=`1`
]]
```


[0]: http://rtfm.modx.com/revolution/2.x/developing-in-modx/other-development-resources/class-reference/modx/modx.makeurl
