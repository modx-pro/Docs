Быстрый сниппет генерации карты сайта для поисковых систем. Легко заменяет GoogleSitemap, при этом понимает его параметры (конвертирует в собственные).

Главная особенность - очень высокая скорость, по сравнению с аналогом. Замерял на <a href="/sitemap.xml">своем сайте</a>: при 1700 страниц скорость генерации возросла в **12 раз**, с 8.4 сек. до 0,7.

Возможный недостаток только один - по умолчанию отключена проверка прав на доступ к документам. Это легко исправить включением недокументированного параметра (Внимание: замедляет работу!):
```
[[!pdoSitemap?
	&checkPermissions=`list`
]]
```

Конечно, ресурсы лучше исключать из карты параметрами сниппета.

## Параметры
В отличии от GoogleSitemap, в pdoSitemap работа с ресурсами гораздо более продвинутая.


* **&tpl** - Имя чанка для оформления ресурса. Если не указан, то содержимое полей ресурса будет распечатано на экран.
* **&tplWrapper** - Чанк-обёртка, для заворачивания всех результатов. Понимает один плейсхолдер: [[+output]]. Не работает вместе с параметром "toSeparatePlaceholders".
* **&templates** - Список шаблонов, через запятую, для фильтрации результатов. Если id шаблона начинается с дефиса, ресурсы с ним исключается из выборки.
* **&context** - Ограничение выборки по контексту ресурсов.
* **&depth** - Глубина поиска дочерних ресурсов от родителя.
* **&showDeleted** - Показывать удалённые ресурсы.
* **&showHidden** - Показывать ресурсы, скрытые в меню.
* **&sitemapSchema** - Схема карты сайта.
* **&showUnpublished** - Показывать неопубликованные ресурсы.
* **&hideUnsearchable** - Скрыть ресурсы, которые не участвуют в поиске.
* **&resources** - Список ресурсов, через запятую, для вывода в результатах. Если id ресурса начинается с дефиса, этот ресурс исключается из выборки.
* **&parents** - Список родителей, через запятую, для поиска результатов. По умолчанию выборка ограничена текущим родителем. Если поставить 0 - выборка не ограничивается. Если id родителя начинается с дефиса, он и его потомки исключается из выборки.
* **&sortby** - Любое поле ресурса для сортировки, включая ТВ параметр, если он указан в параметре "includeTVs". Можно указывать JSON строку с массивом нескольких полей. Для случайно сортировки укажите "RAND()"
* **&sortdir** - Направление сортировки: по убыванию или возрастанию.
* **&where** - Массив дополнительных параметров выборки, закодированный в JSON.
* **&includeTVs** - Список ТВ параметров для выборки, через запятую. Например: "action,time" дадут плейсхолдеры [[+action]] и [[+time]].
* **&prepareTVs** - Список ТВ параметров, которые нужно подготовить перед выводом. По умолчанию, установлено в "1", что означает подготовку всех ТВ, указанных в "&includeTVs=``"
* **&processTVs** - Список ТВ параметров, которые нужно обработать перед выводом. Если установить в "1" - будут обработаны все ТВ, указанные в "&includeTVs=``". По умолчанию параметр пуст.
* **&outputSeparator** - Необязательная строка для разделения результатов работы.
* **&forceXML** - Принудительно выводить страницу как xml.
* **&useWeblinkUrl** - Генерировать ссылку с учетом класса ресурса.


## Примеры
Обычный вывод карты сайта для текущего контекста:
```
[[pdoSitemap]]
```

Генерируем карту сайта только из определённый контейнеров:
```
[[pdoSitemap?
	&parents=`10`
]]
```

Исключаем ресурсы с id = 15 и 25, вместе с их потомками:
```
[[pdoSitemap?
	&parents=`10, -15,-25`
]]
```

А теперь исключаем id = 15 с потомками, а 25 - без:
```
[[pdoSitemap?
	&resources=`-25`
	&parents=`-15,10`
]]
```

Добавляем еще один контекст:
```
[[pdoSitemap?
	&resources=`-25`
	&parents=`-15,10`
	&context=`web,catalog`
]]
```

А вот так можно посмотреть лог выборки карты:
```
[[pdoSitemap?
	&resources=`-25`
	&parents=`-15,10`
	&context=`web,catalog`
	&showLog=`1`
	&forceXML=`0`
]]
```