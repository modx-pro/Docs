Сниппет для вывод пользователей сайта через pdoTools.

Может выбирать юзеров определённых групп и ролей. Аналогов, по большому счету, нет.

## Параметры

* **&tpl** - Имя чанка для оформления ресурса. Если не указан, то содержимое полей ресурса будет распечатано на экран.
* **&returnIds** - Возвращать строку со списком id ресурсов, вместо оформленных результатов.
* **&showLog** - Показывать дополнительную информацию о работе сниппета. Только для авторизованных в контекте "mgr".
* **&fastMode** - Быстрый режим обработки чанков. Все необработанные теги (условия, сниппеты и т.п.) будут вырезаны.
* **&sortby** - Любое поле ресурса для сортировки, включая ТВ параметр, если он указан в параметре "includeTVs". Можно указывать JSON строку с массивом нескольких полей. Для случайно сортировки укажите "RAND()"
* **&sortdir** - Направление сортировки: по убыванию или возрастанию.
* **&limit** - Ограничение количества результатов выборки. Можно использовать "0".
* **&offset** - Пропуск результатов от начала.
* **&outputSeparator** - Необязательная строка для разделения результатов работы.
* **&toPlaceholder** - Если не пусто, сниппет сохранит все данные в плейсхолдер с этим именем, вместо вывода не экран.
* **&groups** - Список групп пользователей, через запятую. Можно использовать имена и id. Если значение начинается с тире, значит пользователь не должен присутствовать в этой группе.
* **&roles** - Список ролей пользователей, через запятую. Можно использовать имена и id. Если значение начинается с тире, значит такой роли у пользователя быть не должно.
* **&users** - Список пользователей для вывода, через запятую. Можно использовать usernames и id. Если значение начинается с тире, этот пользователь исключается из выборки.
* **&where** - Массив дополнительных параметров выборки, закодированный в JSON.
* **&showInactive** - pdotools_prop_showInactive
* **&showBlocked** - pdotools_prop_showBlocked
* **&idx** - Вы можете указать стартовый номер итерации вывода результатов.
* **&first** - Номер первой итерации вывода результатов.
* **&last** - Номер последней итерации вывода результатов. По умолчанию он рассчитается автоматически, по формуле (total + first - 1).
* **&tplFirst** - Имя чанка для первого ресурса в результатах.
* **&tplLast** - Имя чанка для последнего ресурса в результатах.
* **&tplOdd** - Имя чанка для каждого второго ресурса.
* **&tplWrapper** - Чанк-обёртка, для заворачивания всех результатов. Понимает один плейсхолдер: [[+output]]. Не работает вместе с параметром "toSeparatePlaceholders".
* **&wrapIfEmpty** - Включает вывод чанка-обертки (tplWrapper) даже если результатов нет.
* **&totalVar** - Имя плейсхолдера для сохранения общего количества результатов.
* **&tplCondition** - Поле ресурса, из которого будет получено значение для выбора чанка по условию в "conditionalTpls".
* **&tplOperator** - Необязательный оператор для проведения сравнения поля ресурса в "tplCondition" с массивом значений и чанков в "conditionalTpls".
* **&conditionalTpls** - JSON строка с массивом, у которого в ключах указано то, с чем будет сравниваться "tplCondition", а в значениях - чанки, которые будут использованы для вывода, если сравнение будет успешно. Оператор сравнения указывается в "tplOperator". Для операторов типа "isempty" можно использовать массив без ключей.
* **&select** - Список полей для выборки, через запятую. Можно указывать JSON строку с массивом, например {"modResource":"id,pagetitle,content"}.
* **&toSeparatePlaceholders** - Если вы укажете слово в этом параметре, то ВСЕ результаты будут выставлены в разные плейсхолдеры, начинающиеся с этого слова и заканчивающиеся порядковым номером строки, от нуля. Например, указав в параметре "myPl", вы получите плейсхолдеры [[+myPl0]], [[+myPl1]] и т.д.


## Примеры
При запуске без параметров, сниппет выводит всех пользователей сайта.
```
[[!pdoUsers]]
```

Вывод пользователей группы Authors:
```
[[!pdoUsers?
	&groups=`Authors`
	&tpl=`tpl.Authors.author`
	&sortdir=`asc`
]]
```

Можно комбинировать его с pdoPage\getPage:
```
[[!pdoPage?
	&element=`pdoUsers`
	&groups=`Authors`
	&tpl=`tpl.Authors.author`
	&sortdir=`asc`
]]
```

Встроенные чанки:
```
[[!pdoUsers?
	&roles=`Member`
	&tpl=`@INLINE <p>Имя - [[+fullname]], ID - [[+id]]</p>`
	&sortby=`id`
	&sortdir=`asc`
]]
```

## Демо
[Вывод авторов и друзей](http://store.simpledream.ru/friends.html) репозитория Simple Dream.

[![](http://st.bezumkin.ru/files/b/7/9/b792406326ccd13a79ce417c6e7d2306s.jpg)](http://st.bezumkin.ru/files/b/7/9/b792406326ccd13a79ce417c6e7d2306.png)