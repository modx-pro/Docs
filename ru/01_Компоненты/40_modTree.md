## ModTree

Компонент позволяет связать ресурсы  сайта между собой. На странице связанные ресурсы выводятся в виде дерева.

Создайте связи между ресурсами в административной части.

[![](https://file.modx.pro/files/b/3/1/b31a66bf709cb4e4212e157d7c1d496ds.jpg)](https://file.modx.pro/files/b/3/1/b31a66bf709cb4e4212e157d7c1d496d.jpg)

Результат представлен [на демо примере][1].

При загрузке страницы выполняется первоначальный поиск:  
&queryLinks=`1` (по умолчанию) - связанных ресурсов для &parent (по умолчанию - текущий ресурс),  
&queryLinks=`0` - дочерних ресурсов для &parent.  

Затем, при клике на иконки узлов ресурсов выполняется поиск связанных ресурсов для них.

При клике на ресурсы выводится содержание ресурса

[![](https://file.modx.pro/files/4/1/1/41169caaac34dbce4a1215f8a61963ffs.jpg)](https://file.modx.pro/files/4/1/1/41169caaac34dbce4a1215f8a61963ff.png)

Использует AJAX. JQuery не требуется.

### Примеры вызова сниппета:

### Отображение дочерних ресурсов

&queryLinks=`0`. Отображение дочерних ресурсов ресурса 7 при загрузке страницы.

```php
[[modTree?
    &parent=`7`
    &limitList=`5`
    &queryLinks=`0`
    ]]
```

### Отображение связанных ресурсов

Отображение связанных ресурсов ресурса 15 при загрузке страницы.

```php
[[modTree?
    &parent=`15`
    &limitList=`5`
    ]]
```

### Параметры вызова сниппета

##### Параметры отображения

| Параметр             | По умолчанию                | Описание                                                                                                                                                                                                                                                      |
| -------------------- | --------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **&tplOuter**        | tpl.ModTree.outer           | Основной шаблон                                                                                                                                                                                                                                               |
| **&tplList**         | tpl.ModTree.itemList        | Шаблон элементов первоначального вывода                                                                                                                                                                                                                       |
| **&tplTree**         | tpl.ModTree.itemTree        | Шаблон дочерних элементов дерева                                                                                                                                                                                                                              |
| **&tplSearchField**  | tpl.ModTree.itemSearchField | Шаблон полей поиска                                                                                                                                                                                                                                           |
| **&tplButtons**      | tpl.ModTree.paginateBtns    | Шаблон кнопок пагинации                                                                                                                                                                                                                                       |
| **&sortBy**          | menuindex                   |                                                                                                                                                                                                                                                               |
| **&sortDir**         | ASC                         |                                                                                                                                                                                                                                                               |
| **&limit**           | 0                           | Ограничение количества дочерних ресурсов                                                                                                                                                                                                                      |
| **&limitList**       | 15                          | Ограничение первоначального поиска                                                                                                                                                                                                                            |
| **&contentIdPrefix** | modtree-                    | Префикс ID для полей контента. В случае двух или более вызовов сниппета на странице, потребуется для каждого угазать свой шаблон со своими префикс Id. Поля контента могут находиться в любом месте страницы, в т.ч. вне пределов основного шаблона сниппета. |
| **&customCss**       | 0                           | 1 - не подключается CSS файл компонента. Если вы хотите задать свои стили для компонента, то можете запретить подключение встроенного файла стилей.                                                                                                           |

### Параметры поиска

| Параметр          | По умолчанию      | Описание                                                                                                                  |
| ----------------- | ----------------- | ------------------------------------------------------------------------------------------------------------------------- |
| **&queryLinks**   | 1                 | Определяет первоначальный поиск. `1` - связанные ресурсы. `0` - Дочерние ресурсы.                                         |
| **&parent**       | Текущий ресурс    | Ресурс для первоначального поиска                                                                                         |
| **&queryForce**   | 1                 | Определяет, выполнять ли первоначальный поиск . `1` - поиск при загрузке страницы, `0` - поиск только при нажатии "Поиск" |
| **&linkWay**      | 0                 | Направление поиска связи. `1` - от master к slave. `-1` - от slave к master. `0` - в обе стороны                          |
| **&searchFields** | padetitle,content | Поля поиска. Строка разделённая запятыми. Для запрета вывода полей - &searchFields=``                                     |

[1]: http://modtree.visermort.ru/examples.html
