# Сниппет Sendex

Компонент для работы с Email рассылками.

Сниппет очень простенький, и позволяет юзерам самостоятельно работать с подпиской: подписываться и отписываться.

Если пользователь авторизован, ему нужно просто нажать на кнопку. Если нет - ему нужно будет подтвердить свой email.

Также, если авторизованный пользователь уже подписан на рассылку - ему показывается кнопка для отписки. Анонимы смогут отписаться по ссылке из письма.

## Параметры

| Название               | Описание
| ---------------------- | ----------------------
| **&id**                | Идентификатор (номер) рассылки.
| **&showInactive**      | Показывать\\скрывать неактивные рассылки.
| **&msgClass**          | Класс, который будет выводиться в плейсхолдере `[[+class]]` при условии, что плейсхолдер `[[+message]]` **не пуст**. Класс полезен, если вы хотите изначально не показывать блок с сообщениями в верстке.
| **&tplActivate**       | Чанк с оформлением письма активации подписки.
| **&tplSubscribeAuth**  | Чанк с Формой подписки на рассылку для авторизованных пользователей.
| **&tplSubscribeGuest** | Чанк с Формой подписки на рассылку для анонимов.
| **&tplUnsubscribe**    | Чанк с Формой отписки от рассылки.

## Вызов сниппета

Сниппет нужно вызывать **некэшированным**, так как в зависимости от авторизации пользователя он выводит разные чанки.
Перед использованием необходимо предварительно создать рассылку. См. раздел интерфейс.

```php
[[!Sendex? &id=`1`]]
```

Все сообщения для пользователя выводятся в плейсхолдере `[[+message]]`, в чанках с формой.

## История

Компонент был написан в качестве демонстрации на платных курсах сайта bezumkin.ru.
Все занятия курса [находятся здесь][1].

Исходный код [на GitHub][2].

На данный момент Sendex тестируется и доводится до стабильного состояния.

[1]: http://bezumkin.ru/training/course1/
[2]: https://github.com/bezumkin/Sendex
