# Настройки

Основные параметры компонента можно найти в разделе "Настройки системы", пространство easyComm

## Основные настройки

Параметр  | Заголовок  | Описание
------------- | ------------- | -------------
**ec_auto_reply_author** | Автоматически заполнять поле Автор ответа | Если включено, то поле Автор ответа в админке будет заполнено именем текущего менеджера.
**ec_frontend_css** | Стили фронтенда | Путь к файлу со стилями, используемыми во фронтенде. Если вы хотите использовать собственные стили - укажите путь к ним здесь, или очистите параметр и загрузите их вручную через шаблон сайта.
**ec_frontend_js** | Скрипты фронтенда | Путь к файлу со скриптами, используемыми во фронтенде. Если вы хотите использовать собственные скрипты - укажите путь к ним здесь, или очистите параметр и загрузите их вручную через шаблон сайта.
**ec_show_resources** | Показывать вкладку у перечисленных ресурсов | Список id ресурсов через запятую, у которых будет показана вкладка Сообщения. Укажите *, что бы показывать у всех ресурсов.
**ec_show_templates** | Показывать вкладку у ресурсов с перечисленными шаблонами | Список id шаблонов через запятую, у  ресурсов с этими шаблонами будет показана вкладка Сообщения. Важно, этот параметр работает в связке с предыдущим, если хоть одним правилом показ вкладки разрешен, она будет показана. Укажите *, что бы показывать у всех шаблонов.
**ec_message_grid_fields** | Список полей сообщений в списке | Список полей, доступных в таблице сообщений в административном интерфейсе, через запятую. По-умолчанию: id, thread, subject, date, user_name, user_email, user_contacts, rating, text, reply_author, reply_text, ip.
**ec_message_window_layout** | Разметка окна редактирования сообщения | Разметка окна редактирования сообщения в административном интерфейсе. Подробнее в разделе документации "Плагины и кастомизация".
**ec_message_grid_filters** | Фильтры в списке сообщений | Строка с массивом данных для выпадающего списка фильтра в сообщениях. Пример данных: [["Все",""], ["Отзывы", "resource-%"], ["Вопросы", "question-%"], ["Отзывы на главной", "home"]]. Таким образом данная строка содержит массив, каждый элемент которого в свою очередь тоже массив из 2х элементов: заголовка и строки для фильтрации (оператор LIKE) по полю `Thread`.`name`. Для заголовка можно указывать записи словаря, например вместо "Все" написать _("ec_all_messages") и создать такую запись в лексиконах. По-умолчанию настройка пуста, при этом поле с фильтром скрывается.
**ec_thread_grid_fields** | Список полей цепочек в списке | Список полей, доступных в таблице цепочек в административном интерфейсе. По-умолчанию: id, resource, name, title, count, rating_simple, rating_wilson.
**ec_thread_window_fields** | Список полей при редактировании цепочки | Список полей, доступных в окне редактирования цепочки в административном интерфейсе. По-умолчанию: resource, name, title, rating_simple, rating_wilson.
**ec_use_rte** | Использовать Rich Text Editor для поля Ответ | Включите, чтобы отвечать пользователям с использованием визуального редактора (заранее установленного в системе, например TinyMCE.
**ec_use_reply_templates** | Использовать шаблоны ответов | Включите, чтобы создать шаблоны для быстрого ответа. Создавать новые шаблоны можно в разделе Приложения => easyComm. В шаблонах можно использовать поля Сообщения, например: "Добрый день, {$user_name}! Мы выслали данные на вашу почту {$user_email}".

## Настройка оценок

Параметр  | Заголовок  | Описание
------------- | ------------- | -------------
**ec_rating_max** | Максимально возможная оценка |  Используется для ограничения введенных пользователями данных. Во фронтенде вам необходимо самостоятельно изменить код, отвечающий за максимальную оценку. По-умолчанию - 5.
**ec_rating_visual_editor** | Визуальное отображение рейтинга в менеджере | Если включено, то рейтинг в админке будет отображаться графически, иначе - числом.
**ec_rating_wilson_confidence** | Доверительный уровень для рассчета рейтинга по Вильсону. | Подробное описание см. в публикации [http://habrahabr.ru/company/darudar/blog/143188/](http://habrahabr.ru/company/darudar/blog/143188/).  По-умолчанию - 1.6. Некоторые примеры: 1.6 = 95%, 1.0 = 85%.

## Настройка почтовых уведомлений

Параметр  | Заголовок  | Описание
------------- | ------------- | -------------
**ec_mail_from** | С какого адреса отправлять уведомления о новых сообщениях | Если пусто - будет использована системная настройка emailsender
**ec_mail_from_name** | От чьего имени отправлять уведомления о новых сообщениях | Если пусто - будет использована системная настройка site_name
**ec_mail_manager** | Электронная почта администратора для уведомления | Почта, на которую будут приходить уведомления о новых сообщениях. Если пусто - будет использована системная настройка emailsender
**ec_mail_new_subject_manager** | Тема письма-уведомления администратора о новом сообщения | Можно переопределить через параметр newEmailSubjManager сниппета ecForm
**ec_mail_new_subject_user** | Тема письма-уведомления пользователю о новом сообщения | Можно переопределить через параметр newEmailSubjUser сниппета ecForm
**ec_mail_notify_manager** | Отправлять уведомления администраторам | Уведомлять администратора о новых сообщениях на сайте
**ec_mail_notify_user** | Отправлять уведомления пользователям | Если пользователь оставит свою электронную почту, ему будет отправлено уведомление о том, что он оставил сообщение на сайте
**ec_mail_update_subject_user** | Тема письма-уведомления пользователю об изменении его сообщения (например, опубликовано или менеджер дал ответ на него) | Можно переопределить через параметр updateEmailSubjUser сниппета ecForm

## Защита от спама

Для использования ReCaptcha v2 вам необходимо зарегистрировать ваш сайт:  [https://developers.google.com/recaptcha/](https://developers.google.com/recaptcha/ "https://developers.google.com/recaptcha/")

| Параметр                     | Заголовок                             | Описание                                                                                                                                           |
| ---------------------------- | ------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------- |
| **ec_captcha_enable**        | Включить каптчу (Google ReCaptcha v2) | Если включено, то для защиты от спама компонент использует Google ReCaptcha v2.                                                                    |
| **ec_recaptcha2_api**        | Google ReCaptcha v2 API url           | Адрес, откуда загружать скрипт ReCaptcha. В этом адресе должна быть указана callback функция, в которой и будет вызываться механизм рендера капчи. |
| **ec_recaptcha2_site_key**   | Google ReCaptcha v2 site key          | Выдается при регистрации сайта                                                                                                                     |
| **ec_recaptcha2_secret_key** | Google ReCaptcha v2 secret            | Выдается при регистрации сайта                                                                                                                     |

## Настройка интеграции с Gravatar

| Параметр                | Заголовок                   | Описание                           |
| ----------------------- | --------------------------- | ---------------------------------- |
| **ec_gravatar_default** | Иконка аватара по-умолчанию | URL адрес к аватарке по-умолчанию. |
| **ec_gravatar_size**    | Размер иконки аватара       | Размер в пикселях иконки           |
