# TicketComments

Выводит комментарии и форму для комментирования ресурса.

>Может использоваться с любым документом MODX
>Сниппет вызывается некэшированным

## Параметры вызова сниппета

| Название                         | По умолчанию                           | Описание                                                                                                                                                               |
| -------------------------------- | -------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **&allowGuest**                  | 0                                      | Включить возможность комментирования для неавторизованных пользователей?                                                                                               |
| **&allowGuestEdit**              | 1                                      | Разрешать неавторизованным пользователям редактировать свои комментарии?                                                                                               |
| **&allowGuestEmails**            | 0                                      | Отправлять гостям почтовые уведомления об ответах?                                                                                                                     |
| **&autoPublish**                 | 1                                      | Автоматически публиковать все новые комментарии, без премодерации.                                                                                                     |
| **&autoPublishGuest**            | 1                                      | Автоматически публиковать все новые комментарии неавторизованных пользователей, без премодерации.                                                                      |
| **&depth**                       | 0                                      | Целое число, для указания максимальной глубины ветки комментариев.                                                                                                     |
| **&enableCaptcha**               | 1                                      | Включить защиту от спама для неавторизованных пользователей?                                                                                                           |
| **&fastMode**                    | 1                                      | Если включено - в чанк результата будут подставлены только значения из БД. Все необработанные теги MODX, такие как фильтры, вызов сниппетов и другие - будут вырезаны. |
| **&formBefore**                  | 0                                      | Расположить форму комментирования перед комментариями. По умолчанию - нет.                                                                                             |
| **&toPlaceholder**               |                                       | Не выводить результат работы сниппета, а поместить в плейсхолдер *toPlaceholder*                                                                                 |
| **&separatePlaceholder**                  | 0                                      | При параметре 1 вывести форму и комментарии в плейсхолдеры *toPlaceholder*_form, *toPlaceholder*_thread.                                                                                                                  |
| **&gravatarIcon**                | mm                                     | Если аватарка пользователя не найдена, грузить эту картинку на замену.                                                                                                 |
| **&gravatarSize**                | 24                                     | Размер загружаемого аватара                                                                                                                                            |
| **&gravatarUrl**                 | <http://www.gravatar.com/avatar/>      | Адрес для загрузки аватаров                                                                                                                                            |
| **&maxCaptcha**                  | 10                                     | Максимальное число для генерации кода защиты от спама.                                                                                                                 |
| **&minCaptcha**                  | 1                                      | Минимальное число для генерации кода защиты от спама.                                                                                                                  |
| **&thread**                      |                                        | Имя ветки комментариев. По умолчанию, "resource-[[*id]]".                                                                                                              |
| **&tplCommentAuth**              | tpl.Tickets.comment.one.auth           | Чанк комментария для показа авторизованному пользователю.                                                                                                              |
| **&tplCommentDeleted**           | tpl.Tickets.comment.one.deleted        | Чанк удалённого комментария.                                                                                                                                           |
| **&tplCommentEmailBcc**          | tpl.Tickets.comment.email.bcc          | Чанк для уведомления админов сайта о новом комментарии.                                                                                                                |
| **&tplCommentEmailOwner**        | tpl.Tickets.comment.email.owner        | Чанк для уведомления владельца тикета о новом комментарии.                                                                                                             |
| **&tplCommentEmailReply**        | tpl.Tickets.comment.email.reply        | Чанк для уведомления пользователя о том, что на его комментарий появился ответ.                                                                                        |
| **&tplCommentEmailSubscription** | tpl.Tickets.comment.email.subscription | Чанк для уведомления подписанного пользователя, что в теме появился новый комментарий.                                                                                 |
| **&tplCommentForm**              | tpl.Tickets.comment.form               | Чанк для формы добавления нового комментария.                                                                                                                          |
| **&tplCommentFormGuest**         | tpl.Tickets.comment.form.guest         | Чанк для формы добавления нового комментария гостям.                                                                                                                   |
| **&tplCommentGuest**             | tpl.Tickets.comment.one.guest          | Чанк комментария для показа гостям.                                                                                                                                    |
| **&tplComments**                 | tpl.Tickets.comment.wrapper            | Чанк обертка для всех комментариев страницы.                                                                                                                           |
| **&tplLoginToComment**           | tpl.Tickets.comment.login              | Чанк с требованием авторизоваться.                                                                                                                                     |

## Примеры

* Стандартный вызов сниппета
  
```php
[[!TicketComments?]]
```

* Вызов сниппета с комментариями для неавторизированных пользователей

```php
[[!TicketComments? &allowGuest=`1`]]
```
