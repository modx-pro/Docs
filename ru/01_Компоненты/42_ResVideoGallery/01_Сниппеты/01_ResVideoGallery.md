# ResVideoGallery

Сниппет для вывода видео на странице

## Параметры

| Параметр         | По умолчанию                     | Описание                                                                                                                                                                                                             |
| ---------------- | -------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **autoPlay**     | 1                                | Автоматически запускать проигрывание видео                                                                                                                                                                           |
| **parents**      |                                  | Список категорий, через запятую, для поиска результатов. По умолчанию выборка ограничена текущим родителем. Если поставить 0 - выборка не ограничивается.                                                            |
| **resources**    | ID текущего ресурса              | Список ресурсов, через запятую, для вывода в результатах. Если id товара начинается с минуса, этот товар исключается из выборки.                                                                                     |
| **showInactive** | 0                                | Выводить  неактивное видео.                                                                                                                                                                                          |
| **limit**        | 12                               | Количество выводимого видео. Если указать 0 то будет выведено все видео                                                                                                                                              |
| **offset**       | 0                                | Пропуск результатов от начала.                                                                                                                                                                                       |
| **sortby**       | rank                             | Поле для сортировки                                                                                                                                                                                                  |
| **sortdir**      | DESC                             | Направление сортировки                                                                                                                                                                                               |
| **where**        |                                  | JSON строка для условия WHERE в SQL запросе. Пример: &where={"template":15} (без TV)                                                                                                                                 |
| **tags**         |                                  | Список тегов, через запятую, которые должны быть в видео, что бы оно попало в выдачу                                                                                                                                 |
| **getTags**      | 0                                | Сделать дополнительные запросы, чтобы получить теги?                                                                                                                                                                 |
| **tagsVar**      | tag                              | Если этот параметр не пуст, то сниппет будет принимать из значение "tags" в $_REQUEST["указанноеимя"]. Например, если вы укажите здесь "tag", то сниппет будет выводить только файлы, подходящие в $_REQUEST["tag"]. |
| **photoGallery** |                                  | Выводить вместе с видео файлы фото галереи. Может принимать одно из значений: ms2Images или ms2Gallery.   Где ms2Images - галерея miniShop2; ms2Gallery  галерея MS2Gallery                                          |
| **primarily**    | video                            | Устанавливает приоритет вывода элементов видео и фото галереи. Может принимать одно из значений: video или photo.                                                                                                    |
| **thumb**        | small                            | Название размера превью для фотогалереи. Берется из опции thumbnails источника файлов фотогалереи.                                                                                                                   |
| **ajaxMode**     | button                           | Режим ajax пагинации. Может принимать одно из значений: button или scroll.                                                                                                                                           |
| **plPrefix**     |                                  | Префикс для плейсхолдеров.                                                                                                                                                                                           |
| **tpl**          | resVideoGalleryTpl               | Чанк Fenom для оформления всей галереи.                                                                                                                                                                              |
| **tplRow**       | resVideoGalleryRowTpl            | Чанк Fenom оформления одного элемента галереи.                                                                                                                                                                       |
| **tplEmbed**     | resVideoGalleryEmbedTpl          | Чанк Fenom оформления кода видео плеера                                                                                                                                                                              |
| **css**          | {+assets_url}css/web/default.css | Если вы хотите использовать собственные стили - укажите путь к ним здесь, или очистите параметр и загрузите их вручную через шаблон сайта.                                                                           |
| **js**           | {+assets_url}js/web/default.js   | Если вы хотите использовать собственные скрипты - укажите путь к ним здесь, или очистите параметр и загрузите их вручную через шаблон сайта.                                                                         |

## Настройка  размера превью  для видео

Создание превью происходит через [phpThumb][1] параметры для которого можно указать в настройках компонента, по умолчанию используются следующие:

```json
{"w":640,"h":390,"q":90,"zc":"1","f":"jpg","bg":"000000"}
```

### Пример вызова сниппета ResVideoGallery с Ajax подгрузкой при клике на кнопку для ресурса с ID 5

```php
[[ResVideoGallery?
    &limit=`3`
    &resources=`5`
]]
```

### Пример вызова сниппета ResVideoGallery с Ajax подгрузкой  при прокрутке для ресурса с ID 5

```php
[[ResVideoGallery?
    &limit=`3`
    &resources=`5`
    &ajaxMode=`scroll`
]]
```

### Пример вызова сниппета ResVideoGallery через pdoPage для постраничной навигации для ресурса с ID 5

```php
[[!pdoPage?
    &element=`ResVideoGallery`
    &ajaxMode=`default`
    &limit=`4`
    &resources=`5`
]]

[[!+page.nav]]
```

### Пример вызова сниппета ResVideoGallery для совместного вывода видео и фото из фотогалереи miniShop2

```php
[[ResVideoGallery?
    &limit=`3`
    &resources=`5`
    &photoGallery=`ms2Images`
]]
```

[1]: http://phpthumb.sourceforge.net/demo/demo/phpThumb.demo.demo.php
