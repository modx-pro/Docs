**SEO Domains** — Это добавление дополнительных доменов и поддоменов для сайта, с возможностью импорта доменов из XLSX файла, а также автоматически добавлять их в Вебмастер Яндекса.

## Возможности

* Управление доп. доменами и поддоменами (site.ru, spb.site.ru, astana.site.kz, site.by, brest.site.by)
* Изменение контента у каждого ресурса под каждый домен/поддомен
* Быстрое копирование любого домена
* Управление доп. полями для каждого домена
* Импорт доменов и всех его доп. полей через XLSX-файл
* Добавление и автоматическое подтверждение прав в Яндекс.Вебмастере
* Автоматическое получение координатов адреса
* Возможность выбора города пользователем

[![](https://file.modx.pro/files/a/3/8/a383a4aa9f1cf74ed56d2a20d2a831e9.png)](https://file.modx.pro/files/a/3/8/a383a4aa9f1cf74ed56d2a20d2a831e9.png)

## Пример использования

Для добавления домена перейдите в Приложения -> Города и домены, нажмите Добавить, и заполните необходимые поля

[![](https://file.modx.pro/files/a/0/1/a011c73b53e50c8c89710b8cba7eb055.png)](https://file.modx.pro/files/a/0/1/a011c73b53e50c8c89710b8cba7eb055.png)

Для добавления дополнительного поля к выбранному домену, перейдите во вкладку Дополнительные поля, и нажмите добавить, введите ключ который будет доступен через вызов плейсхолдера (Пример: `[[!+sd.price_1]]`), а также остальные поля.

[![](https://file.modx.pro/files/3/3/8/338adad21de164b1e35b5541f9366cb8.png)](https://file.modx.pro/files/3/3/8/338adad21de164b1e35b5541f9366cb8.png)

## Доступные плейсхолдеры

* `[[!+sd.domain]]` — Домен
* `[[!+sd.city]]` — Город
* `[[!+sd.city_r]]` — Город (склонение)
* `[[!+sd.phone]]` — Телефон
* `[[!+sd.email]]` — E-mail
* `[[!+sd.address]]` — Адрес
* `[[!+sd.address_full]]` — Полный адрес
* `[[!+sd.coordinats]]` — Координаты

## Изменение контента для у каждого ресурса под каждый город

После установки компонента у каждого ресурса появится новая вкладка «Города и домены».

### Таблица со всеми городами и их содержимым

[![](https://file.modx.pro/files/0/3/6/036157ea0d4e7b3c25ec6f6dd443ea87.png)](https://file.modx.pro/files/0/3/6/036157ea0d4e7b3c25ec6f6dd443ea87.png)

### Пример добавления содержимого для Екатеринбурга

[![](https://file.modx.pro/files/6/3/6/63620f3942354a53c55193924951d359.png)](https://file.modx.pro/files/6/3/6/63620f3942354a53c55193924951d359.png)

После добавления содержимого плейсхолдер `content` автоматически заменяется на нужный контент исходя из домена

## Выбор города на сайте

Вызовите сниппет `SeoDomainsList` в нужном вам месте

### Пример вызова со всеми параметрами

Phx:

```php
[[SeoDomainsList?
    &tpl=`SeoDomains.City.tpl`
    &sortby=`city`
    &sortdir=`ASC`
    &activeClass=`active`
    &limit=`10`
    &showLog=`0`
]]
```

Fenom:

```php
{'SeoDomainsList' | snippet : [
    'tpl' => 'SeoDomains.City.tpl'
    'sortby' => 'city'
    'sortdir' => 'ASC'
    'activeClass' => 'active'
    'limit' => 10
    'showLog' => 0
]}
```

[![](https://file.modx.pro/files/5/7/2/572fdc490c5744b76da388e4eba8373f.png)](https://file.modx.pro/files/5/7/2/572fdc490c5744b76da388e4eba8373f.png)

## Автоматическое добавление сайта в Яндекс.Вебмастер

Для начала вам нужно зарегистрировать приложение в https://oauth.yandex.ru/, обязательно выберите в Доступах «Добавление сайтов в Яндекс.Вебмастер, получение информации о статусе индексирования». После получения `ID`, перейдите https://oauth.yandex.ru/authorize?response_type=token&client_id=ID, после скорируйте `token`, и сохраните его в Настройках приложения, ключ `seodomains_token`

## Управление доменами через админку MODX

Для это достаточно в Алиасах к сайту прописать wildcart поддомен (Пример: `*.seodomains.tyrsyna.ru`). При обращении к несуществующему домену будет происходить редирект на основной домен который был введен в настройках (ключ `seodomains_main_host`)

[![](https://file.modx.pro/files/2/0/7/207d143762c6b2b502e7b1684d541dcds.jpg)](https://file.modx.pro/files/2/0/7/207d143762c6b2b502e7b1684d541dcds.jpg)

## Настройки компонента

* `seodomains_city_fields` — Поля таблицы
* `seodomains_cyrillic_domain` — Выберите Да если у вас Кириллический домен
* `seodomains_html_parent` — Родитель HTML ресурсов для подтверждения прав на домен
* `seodomains_main_host` — Основной хост
* `seodomains_phx_prefix` — Префикс для плейсхолдеров
* `seodomains_token` — Token от Яндекс.OAuth

## FAQ

Q: Где я могу найти пример xlsx-файла для импорта?

A: Пример находится в папке **assets/components/seodomains/import**

Q: Как добавлять доп. поля через XLSX-файл?

A: Откройте пример который находится тут — **assets/components/seodomains/import**, там вы найдете строчку **Дополнительные поля**, вставьте в неё JSON массив следующего содержания:

```json
[
{"name":"Название вашего поля (необязательно)","key":"Ключ вашего доп поля","value":"Его значение"},
{"name":"Название вашего 2 поля (необязательно)","key":"Ключ вашего 2 доп поля","value":"Его значение"}
]
```