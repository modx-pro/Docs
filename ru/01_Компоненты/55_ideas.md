
# Идеи, вопросы, проблемы, предложения.

Виджет обратной связи с возможностью голосования для MODX.  Своеобразный аналог сервиса reformal.ru.

Виджет крепится сбоку, в виде кнопки

<img src="https://file.modx.pro/files/4/d/e/4dedc3fa3987b965cc643d673774c4c6s.jpg">

По клику - вызывается модальное окно
<img src="https://file.modx.pro/files/f/7/7/f775750f2e2cef567e9fc55ab842396ds.jpg">

Из "коробки" мы сразу получаем приятный, ненавязчивый дизайн, в том числе адаптивную версию.
<img src="https://file.modx.pro/files/a/d/3/ad3e443dc5c0b21189f5102d68218595s.jpg">

Дизайн компонента - естественно можно отключить и подготовить свой собственный.

## Предлагаемая логика работы:

1. Пользователь сайта - предлагает идею, задает вопрос или сообщает о проблеме в соответствующем окне.
2. Пост сохраняется в базе и получает статус **на рассмотрении**
3. Администратор получает уведомление о новой записи, модерирует и публикует ее. При необходимости назначает соотвествующий статус, к примеру **Запланировано**
4. Новые посетители сайта видят опубликованный пост и голосуют кнопками Согласен, Не Согласен. Таким образом мы получаем рейтинг постов и возможность сортировки по рейтингу.

## Основные возможности пакета "Идеи":

<ol>
    <li>Три типа идей из коробки: <strong>Идеи, Вопросы, Проблемы.</strong>  Есть возможность изменения и добавления новых типов
    <img src="https://file.modx.pro/files/c/5/d/c5d3db20324b55f2f9390317d0b3ebce.png">
</li>
<li>Пять статусов для идей из коробки:  <strong>На рассмотрении, Запланировано, Отклонено, Выполнено, Делается </strong> Легко добавить свои статусы..
<img src="https://file.modx.pro/files/d/c/1/dc171f7cf9ec3746b875de785080461f.png"></li>
<li>Управление постами из админки, в том числе  добавление новых постов
<img src="https://file.modx.pro/files/f/3/d/f3de6a641d93b19fea4c964ddc3e3483.png">
<img src="https://file.modx.pro/files/a/0/4/a046804374888b63cf877fb5aaaeb5a5.png">
</li>
<li>Возможность предлагать идеи и голосовать анонимам (опция в системных настройках компонента)</li>
</ol>

## Параметры компонента

<ol>
    <li>Разрешить jquery modal - опция подключает библиотеку, для показа модального окна с компонентом. Также здесь подключается библиотека iziToast - всплывающие уведомления</li>
<li>Разрешить iziToast - опция подключает библиотеку для показа красивых всплывающих уведомлений</li>
<li>Разрешить предлагать идеи анонимам - по умолчанию нет</li>
<li>Публиковать идеи сразу без модерации - по умолчанию нет</li>
<li>Разрешить голосовать анонимам - по умолчанию да</li>
<li>Шаблон письма администратору о новой идее - в комплекте приличный email шаблон</li>
<li>Статус публикации новой идеи - По умолчанию На рассмотрении</li>
<li>Путь к основному css файлу фронтэнда - можно указать свой css</li>
<li>Путь к основному js файлу фронтэнда - можно указать свой js</li>
<li>Email администратора -  для отправки уведомлений, по умолчанию emailsender </li>
</ol>

## Установка и использование

В комплекте всего один сниппет и один чанк оформления.

Компонент по задумке работает в модальном окне.  Все необходимые библиотеки, скрипты и стили поставляются вместе с компонентом. И простой вызов сниппета на странице - выведет фиксированную кнопку и модальное окно по клику на эту кнопку.

После установки компонента вызовите сниппет ideas - больше ничего делать не нужно.
Сниппет работает на основе pdoTools и использует его классы.  Наличие данного компонента, как зависимости - обязательно! При установке компонента - наличие pdoTools будет проверено. В случае его отсутствия - он будет установлен автоматически.

### Параметры сниппета:

<ul>
    <li><strong>limit</strong> - Количество записей, по умолчанию 20</li>
<li><strong>sortby</strong> - Сортировка. По умолчанию - по дате создания. Для сортировки доступны поля name, status, user_id, createdon, updatedon, type, vote_for, vote_aganist</li>
<li><strong>sortdir</strong> - направление сортировки. По умолчанию - asc</li>
<li><strong>tpl</strong> - шаблон оформления - по умолчанию tpl.ideas.tpl</li>
</ul>

4. Новые посетители сайта видят опубликованный пост и голосуют кнопками Согласен, Не Согласен. Таким образом мы получаем рейтинг постов и возможность сортировки по рейтингу.

## Основные возможности пакета "Идеи":

<ol>
<li>Три типа идей из коробки: **Идеи, Вопросы, Проблемы.**  Есть возможность изменения и добавления новых типов
<img src="https://file.modx.pro/files/c/5/d/c5d3db20324b55f2f9390317d0b3ebce.png">
</li>
<li>Пять статусов для идей из коробки:  **На рассмотрении, Запланировано, Отклонено, Выполнено, Делается**
Легко добавить свои статусы.
<img src="https://file.modx.pro/files/d/c/1/dc171f7cf9ec3746b875de785080461f.png">
</li>
<li>Управление постами из админки, в том числе  добавление новых постов
<img src="https://file.modx.pro/files/f/3/d/f3de6a641d93b19fea4c964ddc3e3483.png">
<img src="https://file.modx.pro/files/a/0/4/a046804374888b63cf877fb5aaaeb5a5.png">
</li>
<li>Возможность предлагать идеи и голосовать анонимам (опция в системных настройках компонента)</li>
</ol>

## Параметры компонента

| Системный параметр                            | Описание                                                                |
| --------------------------------------------- | ----------------------------------------------------------------------- |
| **Разрешить jquery modal**                    | опция подключает библиотеку, для показа модального окна с компонентом.  |
| **Разрешить iziToast**                        | опция подключает библиотеку для показа красивых всплывающих уведомлений |
| **Разрешить предлагать идеи анонимам**        | по умолчанию нет                                                        |
| **Публиковать идеи сразу без модерации**      | по умолчанию нет                                                        |
| **Разрешить голосовать анонимам**             | по умолчанию да                                                         |
| **Шаблон письма администратору о новой идее** | в комплекте приличный email шаблон                                      |
| **Статус публикации новой идеи**              | По умолчанию На рассмотрении                                            |
| **Путь к основному css файлу фронтэнда**      | можно указать свой css                                                  |
| **Путь к основному js файлу фронтэнда**       | можно указать свой js                                                   |
| **Email администратора**                      | для отправки уведомлений, по умолчанию emailsender                      |

## Установка и использование

В комплекте всего один сниппет и один чанк оформления.

Компонент по задумке работает в модальном окне.  Все необходимые библиотеки, скрипты и стили поставляются вместе с компонентом. И простой вызов сниппета на странице - выведет фиксированную кнопку и модальное окно по клику на эту кнопку.

После установки компонента вызовите сниппет ideas - больше ничего делать не нужно.
Сниппет работает на основе pdoTools и использует его классы.  Наличие данного компонента, как зависимости - обязательно! При установке компонента - наличие pdoTools будет проверено. В случае его отсутствия - он будет установлен автоматически.

### Параметры сниппета:

| Параметр        | Описание                                                      | Значение по умолчанию |
| --------------- | ------------------------------------------------------------- | --------------------- |
| **limit**       | Количество записей                                            | 20                    |
| **sortby**      | Сортировка                                                    | по дате создания      |
| **sortdir**     | направление сортировки                                        | asc                   |
| **tpl**         | шаблон оформления                                             | tpl.ideas.tpl         |
| **resource_id** | id страницы, для ограничения вывода идей по заданной странице | false                 |

Для сортировки доступны поля name, status, user_id, createdon, updatedon, type, vote_for, vote_aganist

Вызывается виджет очень просто. 
В любом месте страницы просто напишите сниппет `[[!ideas]]`

Такой пример сгенерирует на странице кнопку, и скрытое модальное окно с виджетом.

Если хотите вызвать идеи, привязанные только к определенной странице пишем так:

``` php
[[!ideas?
    &resource_id='1'
]]
```
где 1 - это id нужной нам страницы

В случае если вы хотите создать отдельные страницы по типам записей, статусам или пользователям - достаточно немного переписать исходный сниппет, добавив условие выборки.  Возможно такой функционал появится в следующих версиях.

Вживую на виджет можно посмотреть здесь https://megawebs.kz/modx-ideas
