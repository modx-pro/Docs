Начиная с версии 2.2 появилась возможность добавлять характеристики товаров из административной части.

## Административная часть
Для того, чтобы присвоить новые характеристики товарам, необходимо перейти в настройки магазина (приложения → miniShop2 → настройки) и выбрать закладку "Опции".  
Вы также можете фильтровать уже созданные характеристики при помощи дерева категорий товаров, расположенной в левой части страницы.

### Создание новой характеристики
Для создания новой характеристики необходимо нажать кнопку "Создать" и заполнить в появившемся окне дополнительную информацию:
* **Ключ** &rarr; Идентификатор характеристики в системе, определяющий ее плейсхолдер на фронтэнде. Обязательно к заполнению.
* **Название** &rarr; Отображаемый заголовок характеристики.
* **Описание**
* **Единица измерения**
* **Группа** &rarr; Категория в системе Modx.
* **Тип свойства** &rarr; Определяет допустимый формат заполнения значения.

Также при создании характеристики можно сразу определить ее к соответствующим категориям товаров, выбрав их при помощи древа в левой области окна.

[![](https://file.modx.pro/files/c/7/9/c79c9a4bc61188da5f046362259f6996s.jpg)](https://file.modx.pro/files/c/7/9/c79c9a4bc61188da5f046362259f6996.jpg)

После добавления, характеристика будет отображена в таблице опций, где ее можно будет отредактировать или удалить.

### Присвоение характеристики к категории товаров
На странице категории товаров в закладке "Опции" теперь отображаются присвоенные ей характеристики.

[![](https://file.modx.pro/files/3/1/c/31c06e8cd0158d11b3f203ed29d6b9a5s.jpg)](https://file.modx.pro/files/3/1/c/31c06e8cd0158d11b3f203ed29d6b9a5.jpg)

Для того, чтобы добавить в категорию новую характеристику, необходимо нажать кнопку "Добавить" и в появившемся окне выбрать одну из ранее созданных характеристик. 
Также здесь можно настроить обязательность к заполнению, выставить значение по умолчанию и указать, активна ли характеристика в данный момент.

### Заполнение новых характеристик товаров
Созданные характеристики товаров отображаются на странице самого товара во вкладке "Свойства товара".

**Важно:** если товар принадлежит нескольким категориям, то характеристики отображаются от всех допустных ему категорий.

## Фронтенд

### Вывод на сайте
Для отображения созданных характеристик при помощи сниппета **msProducts** необходимо использовать плейсхолдеры вида `[[+ключ_характеристики]]`.

Для отображения желаемых характеристик на странице товара добавлен новый сниппет **msProductOptions**

### Фильтрация и сортировка в msProducts
Для фильтрации по характеристикам, в **msProducts** добавлен параметр **&optionFilters**. Он автоматически подключает необходимые таблицы и дополняет параметр **&where**.  
  
  
Пример использования:
```
&optionFilters=`{"core_count:>":4}`
```

  
Для сортировки используется новый параметр **&sortbyOptions**. В нем через запятую указываются требуемые характеристики и их типы. Порядок сортировки указывается по аналогии параметру **&sort**. 
  
  
Пример использования:
```
&sortbyOptions=`core_count:number` &sortby=`{"pagetitle":"ASC", "core_count":"DESC"}`
```

  
