# Заказ

Панель управления заказами miniShop2 состоит из себя формы с фильтрами и таблицы с данными.

[![](https://file.modx.pro/files/0/2/8/02869bbdbaab68056444acf0e9f992b7s.jpg)](https://file.modx.pro/files/0/2/8/02869bbdbaab68056444acf0e9f992b7.png)

## Фильтр

Фильтровать заказы можно по следующим параметрам:

* Начиная с даты создания заказа
* Заканчивая датой создания заказа
* Фильтр по статусу заказа
* Фильтр по заказчику

[![](https://file.modx.pro/files/a/2/e/a2e0f0493819c617531729cfc84b1333s.jpg)](https://file.modx.pro/files/a/2/e/a2e0f0493819c617531729cfc84b1333.png)

Плюс дополнительно идёт строка поиска заказа, которая ищет по:

* Имени пользователя
* Email его профиля
* Номеру заказа
* Комментарию в заказе, который написал менеджер
* Если указано целое число, то поиск идёт только по id заказа

С середине фильтра выводится информационная панель.
Первый ряд выводит сумму и количество выбранных заказов, с учётом значений поиска и фильтра.
Второй ряд выводит сумму и количество обработанных заказов (статус "Исполнен" и "Отправлен") за последние 30 дней.

### Таблица заказов

Здесь выводятся все заказы, причём набор и порядок столбцов вы можете указать через системную настройку **ms2_order_grid_fields**.
Также вы можете настраивать доступные колонки через настройки заголовков таблицы:

[![](https://file.modx.pro/files/f/5/7/f572cbd557a61f337cadc570028e71b9s.jpg)](https://file.modx.pro/files/f/5/7/f572cbd557a61f337cadc570028e71b9.png)

Эти настройки таблицы сохраняются в реестре системы.

Доступна сортировка при клике по нужному столбцу, она тоже запоминается.

[![](https://file.modx.pro/files/2/2/0/2208f4732d2a35f1baf146faa5123521s.jpg)](https://file.modx.pro/files/2/2/0/2208f4732d2a35f1baf146faa5123521.png)

Вы можете выбирать сразу несколько заказов для удаления, с помощью Shift или Ctrl (Cmd) на клавиатуре.

### Редактирование заказа

Чтобы изменить заказ, нужно нажать или на кнопку в колонке "Действия" или кликнуть на нужную строку 2 раза левой кнопкой мыши.
За раз можно редактировать только один заказ.

При открытии заказа в адрес браузера добавляется параметр `&order=id заказа` - это прямая ссылка на него.

Выбранная вкладка панели заказа тоже запоминается. По умолчанию их доступно 4 штуки:

#### Общая информация

Здесь вы можете вручную поменять статус заказа, метод доставки и оплаты через выпадающие списки. Они связаны между собой, как это указано в разделе настроек магазина.
То есть, сменить фиксирующий статус заказа, или выбрать метод оплаты, не соответствующий доставке, не получится.

[![](https://file.modx.pro/files/8/f/a/8fab54bbc646551dd5daeea657eccc39s.jpg)](https://file.modx.pro/files/8/f/a/8fab54bbc646551dd5daeea657eccc39.png)

Также вы можете прикрепить заказ к другому пользователю. Еще можно написать какой-либо комментарий для дальнейшего поиска через фильтр заказов.

#### Заказанные товары

Таблицы с оформленными товарами. Вы можете их изменять, удалять или добавлять.
Здесь тоже можно менять набор столбцов через системную настройку **ms2_order_product_fields**, а потом настраивать их через меню заголовков.

[![](https://file.modx.pro/files/4/f/f/4ff54aefeddd1cbd8134cae865c415b4s.jpg)](https://file.modx.pro/files/4/f/f/4ff54aefeddd1cbd8134cae865c415b4.png)

Настройки заказанного товара открываются через кнопку или двойной клик.

[![](https://file.modx.pro/files/8/7/c/87ca039182d9da906baaf78666691953s.jpg)](https://file.modx.pro/files/8/7/c/87ca039182d9da906baaf78666691953.png)

Опции товаров можно менять в формате JSON.

#### Адрес доставки

Эта вкладка опциональна. По умолчанию она выводит поля, указанные в системной настройке **ms2_order_address_fields**.

[![](https://file.modx.pro/files/9/f/9/9f942468cbaa42114753b8d0c55c6450s.jpg)](https://file.modx.pro/files/9/f/9/9f942468cbaa42114753b8d0c55c6450.png)

Однако, если адрес у вас в заказах не используется, то вы можете просто очистить эту настройку и вкладка будет скрыта.

[![](https://file.modx.pro/files/9/d/f/9df52e923dd50cf3e730395b46615a70s.jpg)](https://file.modx.pro/files/9/d/f/9df52e923dd50cf3e730395b46615a70.png)

#### История заказа

Здесь выводится история смены статуса заказа. Дата, время и пользователь (менеджер).

[![](https://file.modx.pro/files/f/d/9/fd932d559594f16543926db47e187487s.jpg)](https://file.modx.pro/files/f/d/9/fd932d559594f16543926db47e187487.png)

При клике по имени будет открыто новое окно браузера с редактированием этого пользователя.
