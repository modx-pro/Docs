# msMerchant

Для того, чтобы принимать оплату через «Единую кассу» вам необходимо сначала [зарегистрировать][1] магазин в этой системе.

## Настройка «Единой кассы»

В настройках магазина вам нужно указать следующие параметры:

* url магазина
* url скрипта обработки платежей - <http://вашСайт.ru/assets/components/minishop2/payment/merchant.php>
* метод формирования ЭЦП - MD5

[![](https://file.modx.pro/files/b/9/e/b9e48fff678a34edf5bdc979f8f5e96fs.jpg)](https://file.modx.pro/files/b/9/e/b9e48fff678a34edf5bdc979f8f5e96f.png)
[![](https://file.modx.pro/files/6/5/3/6534da24de0b37e9afe5490684bac371s.jpg)](https://file.modx.pro/files/6/5/3/6534da24de0b37e9afe5490684bac371.png)

## Настройка MODX

В MODX вам нужно настроить следующие параметры (находятся в разделе "Платежи Единая Касса" пространства имен minishop2):

* **Идентификатор магазина** — узнать его можно в личном кабинете
* **Секретный ключ** — секретный ключ, в настройках магазина
* **Страница успешной оплаты** и **страница отказа от оплаты**. Идентификаторы страниц в MODX при успешной оплате или при отмене оплаты соответственно. Рекомендуется указать страницы с корзиной, чтобы покупатель видел свой заказ после возврата с сервиса. При пустых значениях пользователь будет переправлен на главную страницу.

[![](https://file.modx.pro/files/4/3/4/434ef8ca3d3615a9200afa767cf33771s.jpg)](https://file.modx.pro/files/4/3/4/434ef8ca3d3615a9200afa767cf33771.png)

Также не забудьте включить новый метод оплаты и назначить его в вариантах доставки.

[![](https://file.modx.pro/files/b/d/7/bd7a363c1a93e8a7b36c0b3fc09b7c2cs.jpg)](https://file.modx.pro/files/b/d/7/bd7a363c1a93e8a7b36c0b3fc09b7c2c.png)

[1]: http://www.walletone.com/ru/merchant/ "Регистрация магазина в сиситеме «Единая касса»"
