# msPromoCode

Скидочные промо-коды для [miniShop2][1]
[![](https://file.modx.pro/files/4/d/1/4d1b1efb5043b39395279a1931e38064.png)](https://file.modx.pro/files/4/d/1/4d1b1efb5043b39395279a1931e38064.png)

## Особенности

* Полная AJAX обработка применения/удаления купона к заказу.

* Промо-код можно добавить не только с основной страницы бекенда. На странице товара также есть вкладка "Промо-коды", при добавлении с которой текущий товар сразу привяжется к этому промо-коду. Это удобно, когда надо добавить купон **только для конкретного товара**.

[![](https://file.modx.pro/files/9/9/f/99f933c6bede012de67addc87f8fcf39.png)](https://file.modx.pro/files/9/9/f/99f933c6bede012de67addc87f8fcf39.png)

* Скидку можно указать, как для купона в целом, так и для товара или раздела, привязанного к купону. При этом, чем индивидуальнее будет указана скидка, тем она первостепеннее будет восприниматься компонентом. К примеру, у нас есть купон со скидкой 20%, есть **Раздел 1**, привязанный к этому купону, со скидкой 80% и есть товар лежащий в **Разделе 1**, привязанный к этому купону, со скидкой 40%. Для данного товара скидка будет 40%.

* Если к купону не привязано ни одного товара или раздела — **купон действует на весь магазин**.

* При отправке заказа, ровно как и при открытии страницы со сниппетом `mspcForm`, компонент проверяет, действителен ли на данный момент купон. Если нет, то сообщает об этом юзеру, удаляет купон из формы и обновляет цены в корзине. Это делает невозможным воспользоваться купоном:
  * который был отключён,
  * время действия которого завершилось,
  * количество которого закончилось.

* Если заказ был оформлен с промо-кодом, то в бекенде в модальном окне заказа вверху на первой вкладке появится промо-код и сумма скидки.

[![](https://file.modx.pro/files/8/4/8/848c52f4c835c232e6874d3e591ca5b7.png)](https://file.modx.pro/files/8/4/8/848c52f4c835c232e6874d3e591ca5b7.png)

## Важно

Чанк пакета завязан на Bootstrap 3, поэтому если на вашем сайте он не используется, то стили для чанка придётся прописывать вручную, впрочем как и для miniShop2, т.к. минишоп тоже завязан на Bootstrap.

[1]: /ru/01_Компоненты/02_miniShop2/
