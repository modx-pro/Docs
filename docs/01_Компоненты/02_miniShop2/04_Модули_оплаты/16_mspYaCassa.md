# mspYaCassa

Модуль оплаты [Яндекс Кассы][2] под наш любимый магазин [miniShop2][1].

## Подключение

Необходимо зарегистрироваться и заполнить анкету. Указать настройки подключения:

[![](https://file.modx.pro/files/2/8/c/28c27abcde1633707db8ce1329b4735es.jpg)](https://file.modx.pro/files/2/8/c/28c27abcde1633707db8ce1329b4735e.png)

* HTTP-протокол
* checkURL — sitename.ru/assets/components/minishop2/payment/mspyacassa.php
* avisoURL — sitename.ru/assets/components/minishop2/payment/mspyacassa.php

отметить чекбоксы:

* использовать страницы успеха и ошибки с динамическими адресами
* я хочу провести тестовые платежи

После проверки ваших данных с вами свяжется специалист для проведения технической интеграции.

``` plain
Добрый день.

Меня зовут Евгений, я помогу вам провести техническую интеграцию с Яндекс.Деньгами. Тестирование проходит в специальной демо-среде,
с помощью ненастоящих денег. Мы рекомендуем пройти тестирование, прежде чем начать прием реальных платежей.

данные....

После того, как мы вместе с вами убедимся, что всё работает, вы получите значения для приема платежей
в реальном режиме.
```

## Настройка пакета

Настройки [mspYaCassa] — находятся в настройках [Minishop2]

[![](https://file.modx.pro/files/0/3/8/038c79034bb3484f6a33d7e6f51d45c7s.jpg)](https://file.modx.pro/files/0/3/8/038c79034bb3484f6a33d7e6f51d45c7.png)

Вам необходимо указать данные вашего магазина:

* shopid
* scid
* password
* включить тестовый режим работы (при установке активен).

Данные для тестового доступа могут отличаться от тех, что указаны в кабинете ЯК.

***Внимательнее проверяйте данные!!!***

## Активация способов оплаты

Затем нужно активировать способы оплаты в настройках [Minishop2][1]. И привязать нужные к варианту доставки.

[![](https://file.modx.pro/files/9/a/e/9ae90bb46107c40e6b894f582f5ca4des.jpg)](https://file.modx.pro/files/9/a/e/9ae90bb46107c40e6b894f582f5ca4de.png)

## Тестирование оплаты

Тестирование оплаты проводится в демо-среде, инструкция будет вам выслана специалистами ЯК.
Вообще поддержка очень мне понравилась, отвечают быстро и по существу. Буквально в течении нескольких минут.
После того как вы убедитесь, что оплата с помощью ненастоящих денег успешно проходит, вам нужно
***написать в поддержку о переводе оплаты в боевой режим*** !

Специалист убедится в успешно проведенных тестах и вы получите данные для реальной работы ЯК.
Вам нужно будет зайти в настройки и поменять данные магазина.
Так же отключить тестовый режим работы.

На этом все. Рекомендую вам проверить реальную работу ЯК. Для этого можно создать товар ценой в 1руб.
и купить его различными способами.

## Внимание

***Для подключения к ЯК необходимо чтобы ваш сайт работал по протоколу https***

## Информация

Для удобства метод оплаты ЯК и сумма к переводу на счет будет добавлена к комментарию заказа.
Данную возможность можно отключить в настройках компонента.

[![](https://file.modx.pro/files/f/b/9/fb9324987d24f7efd37c02a5b8878c62s.jpg)](https://file.modx.pro/files/f/b/9/fb9324987d24f7efd37c02a5b8878c62.png)

## Уточнение

Обратил внимание что методы оплаты с помощью телефона и WM выдавали ошибку. На что техподдержка быстро ответила…

``` plain
По вопросу оплаты с помощью мобильного телефона следует обратиться к менеджеру курирующего Вашу организацию.
Опция отключена для Вашего магазина.

WM будет доступна в течении недели т.к. идентификатор Вашего магазина добавляется в систему WM вручную.
Далее происходит верификация с их стороны.
```

[1]: /ru/01_Компоненты/02_miniShop2/
[2]: http://kassa.yandex.ru/
