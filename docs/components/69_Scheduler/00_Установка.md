# Установка

Scheduler можно установить с помощью поставщика пакетов modmore.com, modstore.pro, а также через Github. После установки пакета его необходимо настроить с помощью задания cron один раз, чтобы убедиться, что он срабатывает и может запускать задачи, которые вы ему подбрасываете.

## Установка через modMore

- [Подключите репозиторий modmore.com](https://modmore.com/about/package-provider/), следуя [инструкции](https://modmore.com/extras/scheduler/download/)
- Выберите нужного поставщика компонентов, найдите у него Scheduler и установите

## Установка через modstore.pro

- [Подключите наш репозиторий](https://modstore.pro/info/connection)
- Выберите нужного поставщика компонентов, найдите у него Scheduler и установите

## Настройте задание Cron

Для запуска запланированных задач необходимо настроить одно задание cron. Как часто это должно срабатывать, зависит от того, что вы будете планировать и как часто. Если вы планируете запускать задачу только несколько раз в неделю, вы можете запускать ее каждые 5 минут. Но если вы используете его для отправки электронных писем в фоновом режиме или обработки данных в полуреальном времени, вы, вероятно, будете запускать его каждую минуту.
К сожалению, из-за ограничений cron вы не можете запускать его чаще одного раза в минуту. Можно нажать URL-адрес вручную.
По умолчанию планировщик запускает только одну задачу при каждом запуске. Вы можете изменить количество задач за запуск с помощью системной настройки ```scheduler.tasks_per_run```, если у вас много задач. Если у вас есть длительные задачи (в частности, задачи, выполнение которых занимает больше времени, чем время между каждым запуском), было бы лучше увеличить частоту выполнения, а не количество задач за запуск.
Как настроить задание cron, зависит от вашего сервера, но вам нужно добавить следующую команду:

```shell
php7.4 /home/server\_user/path/to/assets/components/scheduler/run.php
```

Пример записи для ежеминутного выполнения в планировщике cron на хостинге MODHOST:

```text
**** * php7.4 ~/www/assets/components/scheduler/run.php
```

## Запуск через HTTP запрос

Если по какой то причине, вам необходимо срочно выполнить задачу без ожидания, а также если используете внешние подключения - выполните следующий запрос, включая ctx параметр

```text
https://yoursite.com/assets/components/scheduler/run.php?ctx=web
```

Не рекомендуется запускать задания cron через HTTP. Это означает, что внешний веб-сервер обрабатывает запрос, который практически всегда настроен с ограничениями на память и время обработки, что может привести к сбою длительных или тяжелых задач.

Эти ограничения не действуют для реальных заданий CRON на сервере.
