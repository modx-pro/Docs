---
title: –ö–æ–ª–æ–Ω–∫–∏ –≥—Ä–∏–¥–æ–≤
---
# –£—Ç–∏–ª–∏—Ç—ã: –ö–æ–ª–æ–Ω–∫–∏ –≥—Ä–∏–¥–æ–≤

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–ª–æ–Ω–æ–∫ –≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö MiniShop3.

## –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∫–æ–ª–æ–Ω–∫–∏ –≤ –≥—Ä–∏–¥–∞—Ö (—Ç–∞–±–ª–∏—Ü–∞—Ö) –∞–¥–º–∏–Ω–∫–∏:

- –í–∫–ª—é—á–∞—Ç—å –∏ –æ—Ç–∫–ª—é—á–∞—Ç—å –∫–æ–ª–æ–Ω–∫–∏
- –ò–∑–º–µ–Ω—è—Ç—å –ø–æ—Ä—è–¥–æ–∫ –∫–æ–ª–æ–Ω–æ–∫
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é
- –ó–∞–¥–∞–≤–∞—Ç—å —à–∏—Ä–∏–Ω—É –∫–æ–ª–æ–Ω–æ–∫
- –î–æ–±–∞–≤–ª—è—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏

## –î–æ—Å—Ç—É–ø–Ω—ã–µ –≥—Ä–∏–¥—ã

| –ì—Ä–∏–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `customers` | –°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π |
| `orders` | –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ |
| `products` | –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ |
| `order_products` | –¢–æ–≤–∞—Ä—ã –≤ –∑–∞–∫–∞–∑–µ |
| `vendors` | –°–ø–∏—Å–æ–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π |

## –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –í—ã–±–æ—Ä –≥—Ä–∏–¥–∞

–í –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤—ã–±–µ—Ä–∏—Ç–µ –≥—Ä–∏–¥ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞.

### –¢–∞–±–ª–∏—Ü–∞ –∫–æ–ª–æ–Ω–æ–∫

–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∫–æ–ª–æ–Ω–æ–∫:

| –ö–æ–ª–æ–Ω–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| –ò–º—è | –°–∏—Å—Ç–µ–º–Ω–æ–µ –∏–º—è –ø–æ–ª—è |
| –ù–∞–∑–≤–∞–Ω–∏–µ | –û—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ |
| –í–∏–¥–∏–º–æ—Å—Ç—å | –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ –∫–æ–ª–æ–Ω–∫—É |
| –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ | –ú–æ–∂–Ω–æ –ª–∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å |
| –§–∏–ª—å—Ç—Ä | –ú–æ–∂–Ω–æ –ª–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å |
| –ó–∞–º–æ—Ä–æ–∂–µ–Ω–∞ | –§–∏–∫—Å–∞—Ü–∏—è –ø—Ä–∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–µ |
| –®–∏—Ä–∏–Ω–∞ | –®–∏—Ä–∏–Ω–∞ –∫–æ–ª–æ–Ω–∫–∏ –≤ –ø–∏–∫—Å–µ–ª—è—Ö |

### –î–µ–π—Å—Ç–≤–∏—è

- **–ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ** ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞ –∫–æ–ª–æ–Ω–æ–∫
- **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –∫–ª–∏–∫ –Ω–∞ —Å—Ç—Ä–æ–∫—É –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–∏–∞–ª–æ–≥
- **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ** ‚Äî –∫–Ω–æ–ø–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–ª–æ–Ω–∫–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| –ò–º—è –ø–æ–ª—è | –ò–º—è –ø–æ–ª—è –∏–∑ –º–æ–¥–µ–ª–∏ –∏–ª–∏ –∞–ª–∏–∞—Å |
| –ù–∞–∑–≤–∞–Ω–∏–µ | –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–æ–ª–æ–Ω–∫–∏ |
| –í–∏–¥–∏–º–æ—Å—Ç—å | –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –∫–æ–ª–æ–Ω–∫—É |
| –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ | –†–∞–∑—Ä–µ—à–∏—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –ø–æ –∫–ª–∏–∫—É |
| –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è | –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞ |
| –ó–∞–º–æ—Ä–æ–∂–µ–Ω–∞ | –§–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ |

### –†–∞–∑–º–µ—Ä—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| –®–∏—Ä–∏–Ω–∞ | –®–∏—Ä–∏–Ω–∞ –≤ –ø–∏–∫—Å–µ–ª—è—Ö –∏–ª–∏ % |
| –ú–∏–Ω. —à–∏—Ä–∏–Ω–∞ | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ |

### –¢–∏–ø –∫–æ–ª–æ–Ω–∫–∏

| –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----------|
| `model` | –ü–æ–ª–µ –∏–∑ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö |
| `template` | –®–∞–±–ª–æ–Ω–Ω–∞—è –∫–æ–ª–æ–Ω–∫–∞ (HTML) |
| `relation` | –î–∞–Ω–Ω—ã–µ –∏–∑ —Å–≤—è–∑–∞–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã |
| `computed` | –í—ã—á–∏—Å–ª—è–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ |
| `image` | –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è |
| `boolean` | –§–ª–∞–≥ –¥–∞/–Ω–µ—Ç |
| `actions` | –ö–æ–ª–æ–Ω–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π |

## –¢–∏–ø—ã –∫–æ–ª–æ–Ω–æ–∫

### Model (–ü–æ–ª–µ –º–æ–¥–µ–ª–∏)

–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∫–æ–ª–æ–Ω–∫–∞, –æ—Ç–æ–±—Ä–∞–∂–∞—é—â–∞—è –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è.

```
–¢–∏–ø: model
–ò–º—è –ø–æ–ª—è: email
–ù–∞–∑–≤–∞–Ω–∏–µ: Email
```

### Template (–®–∞–±–ª–æ–Ω)

–ö–æ–ª–æ–Ω–∫–∞ —Å HTML-—à–∞–±–ª–æ–Ω–æ–º –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

```
–¢–∏–ø: template
–®–∞–±–ª–æ–Ω: <a href="mailto:{email}">{email}</a>
```

–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ ‚Äî –ø–æ–ª—è —Ç–µ–∫—É—â–µ–π –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∏–≥—É—Ä–Ω—ã—Ö —Å–∫–æ–±–∫–∞—Ö.

### Relation (–°–≤—è–∑—å)

–î–∞–Ω–Ω—ã–µ –∏–∑ —Å–≤—è–∑–∞–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–≤—è–∑–∏:**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| –¢–∞–±–ª–∏—Ü–∞ | –ò–º—è —Å–≤—è–∑–∞–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã |
| –í–Ω–µ—à–Ω–∏–π –∫–ª—é—á | –ü–æ–ª–µ –¥–ª—è —Å–≤—è–∑–∏ |
| –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –ø–æ–ª–µ | –ö–∞–∫–æ–µ –ø–æ–ª–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å |
| –ê–≥—Ä–µ–≥–∞—Ü–∏—è | COUNT, SUM, AVG, MIN, MAX |

**–ü—Ä–∏–º–µ—Ä ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è:**

```
–¢–∏–ø: relation
–¢–∞–±–ª–∏—Ü–∞: msOrder
–í–Ω–µ—à–Ω–∏–π –∫–ª—é—á: customer_id
–ê–≥—Ä–µ–≥–∞—Ü–∏—è: COUNT
```

### Computed (–í—ã—á–∏—Å–ª—è–µ–º–æ–µ)

–ó–Ω–∞—á–µ–Ω–∏–µ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º –∫–ª–∞—Å—Å–æ–º.

```
–¢–∏–ø: computed
–ö–ª–∞—Å—Å: MyComponent\Columns\TotalSpentColumn
```

### Image (–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)

–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–∏–Ω–∏–∞—Ç—é—Ä—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.

```
–¢–∏–ø: image
–ò–º—è –ø–æ–ª—è: image
```

### Boolean (–õ–æ–≥–∏—á–µ—Å–∫–æ–µ)

–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–ª–∞–≥–∞ —Å –∏–∫–æ–Ω–∫–æ–π.

```
–¢–∏–ø: boolean
–ò–º—è –ø–æ–ª—è: active
```

### Actions (–î–µ–π—Å—Ç–≤–∏—è)

–ö–æ–ª–æ–Ω–∫–∞ —Å –∫–Ω–æ–ø–∫–∞–º–∏ –¥–µ–π—Å—Ç–≤–∏–π. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∏ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏.

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–µ–π—Å—Ç–≤–∏–π:**

```json
[
  {
    "name": "edit",
    "handler": "edit",
    "icon": "pi-pencil",
    "label": "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å",
    "severity": null
  },
  {
    "name": "delete",
    "handler": "delete",
    "icon": "pi-trash",
    "label": "–£–¥–∞–ª–∏—Ç—å",
    "severity": "danger",
    "confirm": true,
    "confirmMessage": "–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å?"
  }
]
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–µ–π—Å—Ç–≤–∏—è:**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|----------|
| `name` | string | –£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è –¥–µ–π—Å—Ç–≤–∏—è |
| `handler` | string | –ò–º—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∏–∑ —Ä–µ–µ—Å—Ç—Ä–∞ |
| `icon` | string | –ò–∫–æ–Ω–∫–∞ PrimeIcons (–±–µ–∑ `pi-` –ø—Ä–µ—Ñ–∏–∫—Å–∞) |
| `label` | string | –¢–µ–∫—Å—Ç –ø–æ–¥—Å–∫–∞–∑–∫–∏ / –∫–ª—é—á –ª–µ–∫—Å–∏–∫–æ–Ω–∞ |
| `severity` | string | –°—Ç–∏–ª—å –∫–Ω–æ–ø–∫–∏: `danger`, `success`, `secondary`, `info`, `warn` |
| `confirm` | boolean | –¢—Ä–µ–±–æ–≤–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ |
| `confirmMessage` | string | –¢–µ–∫—Å—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è |
| `visible` | boolean | –í–∏–¥–∏–º–æ—Å—Ç—å –∫–Ω–æ–ø–∫–∏ |
| `disabled` | boolean/function | –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ |
| `disabledField` | string | –ü–æ–ª–µ –∑–∞–ø–∏—Å–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ disabled |

**–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:**

| –û–±—Ä–∞–±–æ—Ç—á–∏–∫ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|----------|
| `edit` | –û—Ç–∫—Ä—ã—Ç—å –∑–∞–ø–∏—Å—å –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ |
| `delete` | –£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å |
| `view` | –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–ø–∏—Å–∏ |
| `addresses` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞–º–∏ (–¥–ª—è –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π) |
| `refresh` | –û–±–Ω–æ–≤–∏—Ç—å –≥—Ä–∏–¥ |

## –ü—Ä–∏–º–µ—Ä—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –°–∫—Ä—ã—Ç—å –∫–æ–ª–æ–Ω–∫—É

1. –ù–∞–π–¥–∏—Ç–µ –∫–æ–ª–æ–Ω–∫—É –≤ —Å–ø–∏—Å–∫–µ
2. –°–Ω–∏–º–∏—Ç–µ —Ñ–ª–∞–≥ "–í–∏–¥–∏–º–æ—Å—Ç—å"
3. –ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"

### –î–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É "–°—É–º–º–∞ –∑–∞–∫–∞–∑–æ–≤"

1. –ù–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É"
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - –ò–º—è: `total_spent`
   - –ù–∞–∑–≤–∞–Ω–∏–µ: `–°—É–º–º–∞ –∑–∞–∫–∞–∑–æ–≤`
   - –¢–∏–ø: `relation`
   - –¢–∞–±–ª–∏—Ü–∞: `msOrder`
   - –í–Ω–µ—à–Ω–∏–π –∫–ª—é—á: `customer_id`
   - –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –ø–æ–ª–µ: `cost`
   - –ê–≥—Ä–µ–≥–∞—Ü–∏—è: `SUM`
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ –∫–æ–ª–æ–Ω–æ–∫

–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∫–æ–ª–æ–Ω–∫–∏ –≤ –Ω—É–∂–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ, –∏—Å–ø–æ–ª—å–∑—É—è drag-and-drop.

### –î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –≤ email

1. –ù–∞–π–¥–∏—Ç–µ –∫–æ–ª–æ–Ω–∫—É `email`
2. –ò–∑–º–µ–Ω–∏—Ç–µ —Ç–∏–ø –Ω–∞ `template`
3. –£–∫–∞–∂–∏—Ç–µ —à–∞–±–ª–æ–Ω: `<a href="mailto:{email}">{email}</a>`
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

## API Endpoints

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≥—Ä–∏–¥–∞

```
GET /api/mgr/grid-config/{grid_name}
```

**–û—Ç–≤–µ—Ç:**

```json
{
  "success": true,
  "object": {
    "columns": [
      {
        "name": "id",
        "label": "ID",
        "visible": true,
        "sortable": true,
        "filterable": false,
        "frozen": true,
        "width": 60,
        "type": "model"
      }
    ]
  }
}
```

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```
PUT /api/mgr/grid-config/{grid_name}
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**

```json
{
  "columns": [
    {
      "name": "id",
      "label": "ID",
      "visible": true,
      "sortable": true,
      "filterable": false,
      "frozen": true,
      "width": 60,
      "sort_order": 0
    }
  ]
}
```

### –°–±—Ä–æ—Å –∫ —É–º–æ–ª—á–∞–Ω–∏—è–º

```
DELETE /api/mgr/grid-config/{grid_name}
```

## –°–∏—Å—Ç–µ–º–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–ª–æ–Ω–∫–∏ –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∏ –∏–º–µ—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:

- –ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å
- –ù–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å –∏–º—è –ø–æ–ª—è
- –ú–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ —Å–∫—Ä—ã—Ç—å

–°–∏—Å—Ç–µ–º–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏ –æ–±—ã—á–Ω–æ –≤–∫–ª—é—á–∞—é—Ç `id` –∏ –∫–æ–ª–æ–Ω–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π.

## –ö–∞—Å—Ç–æ–º–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

MiniShop3 –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä –¥–µ–π—Å—Ç–≤–∏–π `MS3ActionRegistry` –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫ –≤ –∫–æ–ª–æ–Ω–∫—É –¥–µ–π—Å—Ç–≤–∏–π.

### –†–µ–µ—Å—Ç—Ä –¥–µ–π—Å—Ç–≤–∏–π

–†–µ–µ—Å—Ç—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –≥–ª–æ–±–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ `window.MS3ActionRegistry` –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- –†–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π
- –î–æ–±–∞–≤–ª—è—Ç—å —Ö—É–∫–∏ before/after –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π
- –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏

### API —Ä–µ–µ—Å—Ç—Ä–∞

#### register(name, handler, options)

–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–µ–π—Å—Ç–≤–∏—è.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|----------|
| `name` | string | –ò–º—è –¥–µ–π—Å—Ç–≤–∏—è |
| `handler` | function | –§—É–Ω–∫—Ü–∏—è-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `(data, context) => void` |
| `options.override` | boolean | –†–∞–∑—Ä–µ—à–∏—Ç—å –ø–µ—Ä–µ–∑–∞–ø–∏—Å—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ |

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã handler:**

- `data` ‚Äî –æ–±—ä–µ–∫—Ç –¥–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫–∏ –≥—Ä–∏–¥–∞
- `context` ‚Äî –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
  - `gridId` ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≥—Ä–∏–¥–∞
  - `emit(event, data)` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏—è
  - `refresh()` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä–∏–¥–∞
  - `toast` ‚Äî —Å–µ—Ä–≤–∏—Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π PrimeVue
  - `confirm` ‚Äî —Å–µ—Ä–≤–∏—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π PrimeVue
  - `_(key)` ‚Äî —Ñ—É–Ω–∫—Ü–∏—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

#### registerBeforeHook(actionName, hook)

–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ö—É–∫, –≤—ã–ø–æ–ª–Ω—è–µ–º—ã–π **–ø–µ—Ä–µ–¥** –¥–µ–π—Å—Ç–≤–∏–µ–º.

```javascript
MS3ActionRegistry.registerBeforeHook('delete', (data, context) => {
  // –í–µ—Ä–Ω—É—Ç—å false –¥–ª—è –æ—Ç–º–µ–Ω—ã –¥–µ–π—Å—Ç–≤–∏—è
  if (data.is_system) {
    context.toast.add({
      severity: 'warn',
      summary: '–ó–∞–ø—Ä–µ—â–µ–Ω–æ',
      detail: '–ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—É—é –∑–∞–ø–∏—Å—å'
    })
    return false
  }
  return true
})
```

#### registerAfterHook(actionName, hook)

–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ö—É–∫, –≤—ã–ø–æ–ª–Ω—è–µ–º—ã–π **–ø–æ—Å–ª–µ** –¥–µ–π—Å—Ç–≤–∏—è.

```javascript
MS3ActionRegistry.registerAfterHook('delete', (data, context, result) => {
  console.log('–ó–∞–ø–∏—Å—å —É–¥–∞–ª–µ–Ω–∞:', data.id)
  // –ú–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É, –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∏ —Ç.–¥.
})
```

#### –î—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã

| –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|
| `has(name)` | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ |
| `get(name)` | –ü–æ–ª—É—á–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ |
| `unregister(name)` | –£–¥–∞–ª–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ (–∫—Ä–æ–º–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö) |
| `getRegisteredActions()` | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π |
| `execute(name, data, context)` | –í—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ |

### –ü—Ä–∏–º–µ—Ä—ã –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π

#### –ü—Ä–∏–º–µ—Ä 1: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è

**–®–∞–≥ 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞** (–≤ –ø–ª–∞–≥–∏–Ω–µ MODX –∏–ª–∏ –∫–∞—Å—Ç–æ–º–Ω–æ–º JS):

```javascript
// –§–∞–π–ª: assets/components/mycomponent/js/customer-actions.js

document.addEventListener('DOMContentLoaded', () => {
  // –ñ–¥—ë–º –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–µ—Å—Ç—Ä–∞
  if (!window.MS3ActionRegistry) {
    console.error('MS3ActionRegistry not available')
    return
  }

  // –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –¥–µ–π—Å—Ç–≤–∏–µ "–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å"
  MS3ActionRegistry.register('blockCustomer', async (data, context) => {
    try {
      const response = await fetch('/assets/components/minishop3/connector.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: new URLSearchParams({
          action: 'MyComponent\\Processors\\Customer\\Block',
          id: data.id,
          HTTP_MODAUTH: MODx.siteId
        })
      })

      const result = await response.json()

      if (result.success) {
        context.toast.add({
          severity: 'success',
          summary: '–£—Å–ø–µ—Ö',
          detail: `–ü–æ–∫—É–ø–∞—Ç–µ–ª—å ${data.email} –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω`,
          life: 3000
        })
        context.refresh() // –û–±–Ω–æ–≤–∏—Ç—å –≥—Ä–∏–¥
      } else {
        throw new Error(result.message)
      }
    } catch (error) {
      context.toast.add({
        severity: 'error',
        summary: '–û—à–∏–±–∫–∞',
        detail: error.message,
        life: 5000
      })
    }
  })

  // –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –¥–µ–π—Å—Ç–≤–∏–µ "–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å"
  MS3ActionRegistry.register('unblockCustomer', async (data, context) => {
    const response = await fetch('/assets/components/minishop3/connector.php', {
      method: 'POST',
      headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
      body: new URLSearchParams({
        action: 'MyComponent\\Processors\\Customer\\Unblock',
        id: data.id,
        HTTP_MODAUTH: MODx.siteId
      })
    })

    const result = await response.json()
    if (result.success) {
      context.toast.add({
        severity: 'success',
        summary: '–ü–æ–∫—É–ø–∞—Ç–µ–ª—å —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω',
        life: 3000
      })
      context.refresh()
    }
  })
})
```

**–®–∞–≥ 2. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞** —á–µ—Ä–µ–∑ –ø–ª–∞–≥–∏–Ω MODX:

```php
<?php
// –ü–ª–∞–≥–∏–Ω: MyCustomerActions
// –°–æ–±—ã—Ç–∏—è: OnManagerPageBeforeRender

if ($modx->event->name !== 'OnManagerPageBeforeRender') return;

// –¢–æ–ª—å–∫–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π
$controller = $modx->controller ?? null;
if (!$controller || strpos(get_class($controller), 'Customers') === false) return;

$modx->regClientStartupScript(
    MODX_ASSETS_URL . 'components/mycomponent/js/customer-actions.js'
);
```

**–®–∞–≥ 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–ª–æ–Ω–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π** —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:

1. –û—Ç–∫—Ä–æ–π—Ç–µ **–£—Ç–∏–ª–∏—Ç—ã ‚Üí –ö–æ–ª–æ–Ω–∫–∏ –≥—Ä–∏–¥–æ–≤**
2. –í—ã–±–µ—Ä–∏—Ç–µ –≥—Ä–∏–¥ `customers`
3. –ù–∞–π–¥–∏—Ç–µ –∫–æ–ª–æ–Ω–∫—É `actions` –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä
4. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ:
   - –ò–º—è: `blockCustomer`
   - –û–±—Ä–∞–±–æ—Ç—á–∏–∫: `blockCustomer`
   - –ò–∫–æ–Ω–∫–∞: `pi-ban`
   - –°—Ç–∏–ª—å: `danger`
   - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ: –î–∞
   - –°–æ–æ–±—â–µ–Ω–∏–µ: `–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∫—É–ø–∞—Ç–µ–ª—è {email}?`

#### –ü—Ä–∏–º–µ—Ä 2: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞

```javascript
MS3ActionRegistry.register('duplicateProduct', async (data, context) => {
  const response = await fetch('/assets/components/minishop3/connector.php', {
    method: 'POST',
    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
    body: new URLSearchParams({
      action: 'MiniShop3\\Processors\\Product\\Duplicate',
      id: data.id,
      HTTP_MODAUTH: MODx.siteId
    })
  })

  const result = await response.json()

  if (result.success) {
    context.toast.add({
      severity: 'success',
      summary: '–¢–æ–≤–∞—Ä —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω',
      detail: `–°–æ–∑–¥–∞–Ω —Ç–æ–≤–∞—Ä ID: ${result.object.id}`,
      life: 3000
    })
    context.refresh()
  }
})
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–µ–π—Å—Ç–≤–∏—è:**

```json
{
  "name": "duplicate",
  "handler": "duplicateProduct",
  "icon": "pi-copy",
  "label": "–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å",
  "severity": "secondary",
  "confirm": false
}
```

#### –ü—Ä–∏–º–µ—Ä 3: –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

```javascript
MS3ActionRegistry.register('sendNotification', async (data, context) => {
  // –ü–æ–∫–∞–∑–∞—Ç—å –¥–∏–∞–ª–æ–≥ –≤—ã–±–æ—Ä–∞ —à–∞–±–ª–æ–Ω–∞
  const template = prompt('–í–≤–µ–¥–∏—Ç–µ –∏–º—è —à–∞–±–ª–æ–Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:')
  if (!template) return

  const response = await fetch('/assets/components/minishop3/connector.php', {
    method: 'POST',
    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
    body: new URLSearchParams({
      action: 'MiniShop3\\Processors\\Notification\\Send',
      customer_id: data.id,
      template: template,
      HTTP_MODAUTH: MODx.siteId
    })
  })

  const result = await response.json()

  if (result.success) {
    context.toast.add({
      severity: 'success',
      summary: '–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ',
      detail: `Email: ${data.email}`,
      life: 3000
    })
  }
})
```

#### –ü—Ä–∏–º–µ—Ä 4: –£—Å–ª–æ–≤–Ω–∞—è –≤–∏–¥–∏–º–æ—Å—Ç—å –∫–Ω–æ–ø–∫–∏

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è `disabled`:

```javascript
// –í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–æ–ª–æ–Ω–∫–∏
{
  "name": "unblock",
  "handler": "unblockCustomer",
  "icon": "pi-unlock",
  "label": "–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å",
  "severity": "success",
  // –ö–Ω–æ–ø–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞, –µ—Å–ª–∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª—å –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
  "disabledField": "active"  // disabled –∫–æ–≥–¥–∞ active = true
}
```

–ò–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –ø–æ–ª–µ –¥–∞–Ω–Ω—ã—Ö:

```json
{
  "name": "block",
  "handler": "blockCustomer",
  "icon": "pi-ban",
  "label": "–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å",
  "severity": "danger",
  "disabledField": "blocked"  // disabled –∫–æ–≥–¥–∞ blocked = true
}
```

### –•—É–∫–∏ –¥–ª—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π

#### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏–π

```javascript
MS3ActionRegistry.registerAfterHook('delete', async (data, context, result) => {
  // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ —Å–∏—Å—Ç–µ–º—É –∞—É–¥–∏—Ç–∞
  await fetch('/api/audit/log', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      action: 'delete',
      entity: context.gridId,
      entityId: data.id,
      user: MODx.user?.id,
      timestamp: new Date().toISOString()
    })
  })
})
```

#### –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è

```javascript
MS3ActionRegistry.registerBeforeHook('delete', (data, context) => {
  // –ó–∞–ø—Ä–µ—Ç–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "–æ–ø–ª–∞—á–µ–Ω"
  if (context.gridId === 'orders' && data.status === 2) {
    context.toast.add({
      severity: 'error',
      summary: '–ó–∞–ø—Ä–µ—â–µ–Ω–æ',
      detail: '–ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –æ–ø–ª–∞—á–µ–Ω–Ω—ã–π –∑–∞–∫–∞–∑',
      life: 5000
    })
    return false // –û—Ç–º–µ–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ
  }
  return true // –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
})
```

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–∫–æ–Ω–∫–∏

–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏–∫–æ–Ω–∫–∏ [PrimeIcons](https://primevue.org/icons). –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ:

| –ò–∫–æ–Ω–∫–∞ | –ö–ª–∞—Å—Å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|--------|-------|------------|
| ‚úèÔ∏è | `pi-pencil` | –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ |
| üóëÔ∏è | `pi-trash` | –£–¥–∞–ª–µ–Ω–∏–µ |
| üëÅÔ∏è | `pi-eye` | –ü—Ä–æ—Å–º–æ—Ç—Ä |
| üìã | `pi-copy` | –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ |
| ‚¨áÔ∏è | `pi-download` | –°–∫–∞—á–∏–≤–∞–Ω–∏–µ |
| üì§ | `pi-send` | –û—Ç–ø—Ä–∞–≤–∫–∞ |
| üîí | `pi-lock` | –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ |
| üîì | `pi-unlock` | –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ |
| üö´ | `pi-ban` | –ó–∞–ø—Ä–µ—Ç |
| ‚úÖ | `pi-check` | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ |
| ‚ùå | `pi-times` | –û—Ç–º–µ–Ω–∞ |
| üîÑ | `pi-refresh` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ |
| ‚öôÔ∏è | `pi-cog` | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ |
| üñ®Ô∏è | `pi-print` | –ü–µ—á–∞—Ç—å |
| üîó | `pi-external-link` | –í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞ |
