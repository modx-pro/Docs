---
title: ms3recentlyviewedSimilar
---
# Сниппет ms3recentlyviewedSimilar

Выводит товары из тех же категорий (родителей), что и переданные ID просмотренных, исключая сами эти товары. Блок «Похожие на просмотренные».

**Оптимизация:** один запрос getCollection для получения родительских категорий всех просмотренных товаров вместо N отдельных запросов.

## Параметры

| Параметр | Описание | По умолчанию |
|----------|----------|--------------|
| **ids** | ID просмотренных товаров через запятую | — |
| **tpl** | Чанк карточки товара | tplViewedItem (или tplSimilarItem) |
| **limit** | Макс. количество в выборке | 10 |
| **depth** | Глубина поиска по категориям (уровни вложенности) | 1 |

## Примеры

::: code-group

```fenom
{'ms3recentlyviewedSimilar' | snippet : [
  'ids' => $viewedIds,
  'limit' => 8,
  'tpl' => 'tplViewedItem'
]}
```

```modx
[[!ms3recentlyviewedSimilar?
  &ids=`[[+viewedIds]]`
  &limit=`8`
  &tpl=`tplViewedItem`
]]
```

:::

Если у просмотренных товаров нет категорий или в этих категориях нет других товаров, сниппет возвращает пустую строку.

Через коннектор (AJAX): POST с `action=similar`, параметры `ids`, опционально `limit`, `tpl`, `depth`.
