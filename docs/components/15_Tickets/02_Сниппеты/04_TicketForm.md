# TicketForm

Выводит форму для создания тикета пользователем из фронтэнда.
*\*Сниппет вызывается не кэшированным.*

## Параметры вызова сниппета

| Название                 | По умолчанию                                                            | Описание                                                                                                                                    |
| ------------------------ | ----------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------- |
| **&allowedFields**       | parent,pagetitle,content,published                                      | Поля тикета, которые разрешено заполнять пользователю. Можно указывать имена ТВ параметров.                                                 |
| **&context**             |                                                                         | Список контекстов для поиска секций, через запятую.                                                                                         |
| **&parents**             |                                                                         | По умолчанию выводятся все доступные разделы тикетов, но вы можете ограничить их, указав конкретных родителей через запятую. Указав через знак минус "-" можно исключить родителя                |
| **&resources**             |                                                                         | Можно точечно через запятую указать конкретные разделы, доступные в списке или исключить их через знак минус "-" в комбинации с параметром parents                |
| **&permissions**         | section_add_children                                                    | Проверка прав на публикацию в раздел. По умолачанию проверяется разрешение "section_add_children".                                          |
| **&tid**                 |                                                                         | Этот параметр дает возможность вызывать через сниппет редактирование конкретного тикета без использования url-параметра  $_REQUEST['tid'] . |
| **&redirectUnpublished** | 0                                                                       | Вы можете указать, на какой документ отправлять пользователя при создании неопубликованного тикета.                                         |
| **&redirectDeleted**     | 0                                                                       | Вы можете указать, на какой документ отправлять пользователя при удалении тикета.                                                           |
| **&redirectUnDeleted**   | 0                                                                       | Вы можете указать, на какой документ отправлять пользователя при восстановлении тикета.                                                     |
| **&requiredFields**      | parent,pagetitle,content                                                | Обязательные поля тикета, которые пользователь должен заполнить для отправки формы.                                                         |
| **&sortby**              | pagetitle                                                               | Поле для сортировки списка разделов.                                                                                                        |
| **&sortdir**             | ASC                                                                     | Направление сортировки списка разделов.                                                                                                     |
| **&tplFormCreate**       | tpl.Tickets.form.create                                                 | Чанк для создания нового тикета                                                                                                             |
| **&tplFormUpdate**       | tpl.Tickets.form.update                                                 | Чанк для обновления существующего тикета                                                                                                    |
| **&tplPreview**          | tpl.Tickets.form.preview                                                | Чанк для предпросмотра тикета перед публикацией                                                                                             |
| **&tplSectionRow**       | `@INLINE <option value="[[+id]]" [[+selected]]>[[+pagetitle]]</option>` | Чанк для оформления раздела вопросов в форме                                                                                                |
| **&tplTicketEmailBcc**   | tpl.Tickets.ticket.email.bcc                                            | Чанк для уведомления админов сайта о новом тикете.                                                                                          |
| **&validate**            |                                                                         | Валидация полей формы по правилам FormIt (используется при наличии установленного компонента FormIt)                                        |

## Способы вызова

```php
[[!TicketForm?]]
```

## Примеры использования валидатора FormIt

Возможно использование параметра validate по аналогии как он применяется в компоненте FormIt. Компонент FormIt должен быть установлен.
Примеры описаны [в отдельном разделе][1]

[1]: /ru/01_Компоненты/15_Tickets/05_TicketFormIt.md
