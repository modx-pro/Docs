---
name: msMarketingStatuses
description: Компонент позволяет настроить автоматическое управление статусами заказов.
author: gvozdb
modstore: https://modstore.pro/packages/integration/msmarketingstatuses

dependencies: miniShop2
outline: deep
---

# msMarketingStatuses

Компонент позволяет настроить автоматическое управление статусами заказов, что сильно упрощает работу для менеджера, маркетолога или владельца магазина.

**Теперь вам будет легко:**

- Напомнить клиенту об оплате через 5 минут после оформления заказа,
- Попросить оставить отзыв спустя 1 неделю после отправки заказа,
- Выслать промокод на следующий заказ через 2 недели после отправки заказа клиенту.

Всё это теперь будет происходить автоматически, без вашего участия.

## Кейсы применения компонента

### 1. Повышение конверсии заказов в оплату

Повышение конверсии заказов в оплату за счёт автоматической отправки письма с напоминанием об оплате, в течении заданного времени с момента оформления заказа.

Если письмо с подтверждением наличия товара придёт клиенту в течение 5 минут с момента заказа, то повышается вероятность, что "горячий" клиент сразу оплатит заказ и не уйдёт к конкурентам.

Для этого вы просто добавляете новый статус заказа "Напоминание об оплате" в miniShop2 с отправкой письма клиенту, а также создаёте задание в msMarketingStatuses на смену статуса заказа с "Новый" на "Напоминание об оплате" с методом срабатывания "5 минут".

### 2. Получение отзывов о товарах

Получение отзывов о товарах и обслуживании в магазине за счёт автоматической отправки письма клиенту через заданное время.

Для этого вы просто добавляете новый статус заказа "Нужен отзыв" в miniShop2 с отправкой письма клиенту, а также создаёте задание в msMarketingStatuses на смену статуса заказа с "Отправлен" на "Нужен отзыв" с методом срабатывания "10080 минут" (1 неделя).

### 3. Повышение количества повторных заказов

Повышение количества повторных заказов за счёт автоматической своевременной отправки письма с промокодом на следующий заказ.

Для этого вы просто добавляете новый статус заказа "Выдан промокод" в miniShop2 с отправкой письма клиенту в чанке которого генерируется промокод [по кейсу из msPromoCode2][30], а также создаёте задание в msMarketingStatuses на смену статуса заказа с "Отправлен" на "Выдан промокод" с методом срабатывания "20160 минут" (2 недели).

## Установка компонента

Самое главное, что вам необходимо сделать, чтобы компонент автоматически менял статусы заказов – это прописать в cron запуск вспомогательного скрипта, который как раз и запускает задания, добавленные вами через админку MODX.

Прописать вспомогательный скрипт в качестве cron-задания необходимо с частотой запуска раз в минуту.

Пример кода для добавления в cron:

```bash
* * * * * php /{path_to_site}/core/components/msmarketingstatuses/cron/runjobs.php --silent=1
```

где `{path_to_site}` - это полный путь до корневой директории сайта.

::: warning
Запускать скрипт от имени юзера, под которым крутится сайт.
Если запустить от рута или другого юзера, то в кеше будут созданы папки с чужими правами и MODX начнёт сыпать ошибки о невозможности удалить файл или директорию в кеше.

Для этого, если вы зашли в терминал от root или sudo юзера, перед `php …` пропишите `sudo -u{user}`, чтобы получилось так:

```bash
sudo -u{user} php /path_to_script.php
```

- где `{user}` - это имя пользователя в системе, под которым крутится сайт, в ином случае конструкцию `sudo -u{user}` нужно удалить.
:::

[30]: /components/mspromocode2/cases/generate-promocode
